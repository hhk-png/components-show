[{"type":"file","name":"DynamicSizeList.tsx","ext":".tsx","path":"C:\\Users\\郝洪坤\\Desktop\\FrontEnd\\components-show\\react-components\\src\\components-show\\VirtualList\\DynamicSizeList.tsx","content":"<pre><code><span class=\"line\"><span style=\"color:#4D9375\">import</span><span style=\"color:#BD976A\"> React</span><span style=\"color:#666666\">,</span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  CSSProperties</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  ReactNode</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  useEffect</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  useRef</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  useState</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#666666\">}</span><span style=\"color:#4D9375\"> from</span><span style=\"color:#C98A7D77\"> '</span><span style=\"color:#C98A7D\">react</span><span style=\"color:#C98A7D77\">'</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#CB7676\">interface</span><span style=\"color:#5DA994\"> MeasuredData</span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  size</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">number</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  offset</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">number</span></span>\n<span class=\"line\"><span style=\"color:#666666\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#CB7676\">type</span><span style=\"color:#5DA994\"> MeasuredDataMap</span><span style=\"color:#666666\"> =</span><span style=\"color:#5DA994\"> Record</span><span style=\"color:#666666\">&#x3C;</span><span style=\"color:#5DA994\">number</span><span style=\"color:#666666\">,</span><span style=\"color:#5DA994\"> MeasuredData</span><span style=\"color:#666666\">></span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#4D9375\">export</span><span style=\"color:#CB7676\"> interface</span><span style=\"color:#5DA994\"> DynamicRow</span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  index</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">number</span></span>\n<span class=\"line\"><span style=\"color:#666666\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#4D9375\">export</span><span style=\"color:#CB7676\"> interface</span><span style=\"color:#5DA994\"> DynamicSizeListProps</span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  height</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">number</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  width</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">number</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  itemCount</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">number</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  itemEstimatedSize</span><span style=\"color:#CB7676\">?</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">number</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  children</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">React</span><span style=\"color:#666666\">.</span><span style=\"color:#5DA994\">ComponentType</span><span style=\"color:#666666\">&#x3C;</span><span style=\"color:#5DA994\">DynamicRow</span><span style=\"color:#666666\">></span></span>\n<span class=\"line\"><span style=\"color:#666666\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#CB7676\">const</span><span style=\"color:#80A665\"> estimateHeight</span><span style=\"color:#666666\"> =</span><span style=\"color:#666666\"> (</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  defaultItemSize</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">number</span><span style=\"color:#666666\"> =</span><span style=\"color:#4C9A91\"> 50</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  itemCount</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">number</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  lastMeasuredItemIndex</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">React</span><span style=\"color:#666666\">.</span><span style=\"color:#5DA994\">RefObject</span><span style=\"color:#666666\">&#x3C;</span><span style=\"color:#5DA994\">number</span><span style=\"color:#666666\">>,</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  measuredDataMap</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">React</span><span style=\"color:#666666\">.</span><span style=\"color:#5DA994\">RefObject</span><span style=\"color:#666666\">&#x3C;</span><span style=\"color:#5DA994\">MeasuredDataMap</span><span style=\"color:#666666\">></span></span>\n<span class=\"line\"><span style=\"color:#666666\">):</span><span style=\"color:#5DA994\"> number</span><span style=\"color:#666666\"> =></span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">  let</span><span style=\"color:#BD976A\"> measuredHeight</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">number</span><span style=\"color:#666666\"> =</span><span style=\"color:#4C9A91\"> 0</span></span>\n<span class=\"line\"><span style=\"color:#4D9375\">  if</span><span style=\"color:#666666\"> (</span><span style=\"color:#BD976A\">lastMeasuredItemIndex</span><span style=\"color:#666666\">.</span><span style=\"color:#BD976A\">current</span><span style=\"color:#666666\"> >=</span><span style=\"color:#4C9A91\"> 0</span><span style=\"color:#666666\">)</span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">    const</span><span style=\"color:#BD976A\"> lastMeasuredItem</span><span style=\"color:#666666\"> =</span><span style=\"color:#BD976A\"> measuredDataMap</span><span style=\"color:#666666\">.</span><span style=\"color:#BD976A\">current</span><span style=\"color:#666666\">[</span><span style=\"color:#BD976A\">lastMeasuredItemIndex</span><span style=\"color:#666666\">.</span><span style=\"color:#BD976A\">current</span><span style=\"color:#666666\">]</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">    measuredHeight</span><span style=\"color:#666666\"> =</span><span style=\"color:#BD976A\"> lastMeasuredItem</span><span style=\"color:#666666\">.</span><span style=\"color:#BD976A\">offset</span><span style=\"color:#CB7676\"> +</span><span style=\"color:#BD976A\"> lastMeasuredItem</span><span style=\"color:#666666\">.</span><span style=\"color:#BD976A\">size</span></span>\n<span class=\"line\"><span style=\"color:#666666\">  }</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">  const</span><span style=\"color:#BD976A\"> unMeasutedItemsCount</span><span style=\"color:#666666\"> =</span><span style=\"color:#BD976A\"> itemCount</span><span style=\"color:#CB7676\"> -</span><span style=\"color:#BD976A\"> lastMeasuredItemIndex</span><span style=\"color:#666666\">.</span><span style=\"color:#BD976A\">current</span><span style=\"color:#CB7676\"> -</span><span style=\"color:#4C9A91\"> 1</span></span>\n<span class=\"line\"><span style=\"color:#4D9375\">  return</span><span style=\"color:#BD976A\"> measuredHeight</span><span style=\"color:#CB7676\"> +</span><span style=\"color:#BD976A\"> unMeasutedItemsCount</span><span style=\"color:#CB7676\"> *</span><span style=\"color:#BD976A\"> defaultItemSize</span></span>\n<span class=\"line\"><span style=\"color:#666666\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#CB7676\">const</span><span style=\"color:#80A665\"> getItemLayoutdata</span><span style=\"color:#666666\"> =</span><span style=\"color:#666666\"> (</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  props</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">DynamicSizeListProps</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  index</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">number</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  lastMeasuredItemIndex</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">React</span><span style=\"color:#666666\">.</span><span style=\"color:#5DA994\">RefObject</span><span style=\"color:#666666\">&#x3C;</span><span style=\"color:#5DA994\">number</span><span style=\"color:#666666\">>,</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  measuredDataMap</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">React</span><span style=\"color:#666666\">.</span><span style=\"color:#5DA994\">RefObject</span><span style=\"color:#666666\">&#x3C;</span><span style=\"color:#5DA994\">MeasuredDataMap</span><span style=\"color:#666666\">></span></span>\n<span class=\"line\"><span style=\"color:#666666\">):</span><span style=\"color:#5DA994\"> MeasuredData</span><span style=\"color:#666666\"> =></span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">  const</span><span style=\"color:#666666\"> {</span><span style=\"color:#BD976A\"> itemEstimatedSize</span><span style=\"color:#666666\"> =</span><span style=\"color:#4C9A91\"> 50</span><span style=\"color:#666666\"> }</span><span style=\"color:#666666\"> =</span><span style=\"color:#BD976A\"> props</span></span>\n<span class=\"line\"><span style=\"color:#4D9375\">  if</span><span style=\"color:#666666\"> (</span><span style=\"color:#BD976A\">index</span><span style=\"color:#666666\"> ></span><span style=\"color:#BD976A\"> lastMeasuredItemIndex</span><span style=\"color:#666666\">.</span><span style=\"color:#BD976A\">current</span><span style=\"color:#666666\">)</span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">    let</span><span style=\"color:#BD976A\"> offset</span><span style=\"color:#666666\"> =</span><span style=\"color:#4C9A91\"> 0</span></span>\n<span class=\"line\"><span style=\"color:#4D9375\">    if</span><span style=\"color:#666666\"> (</span><span style=\"color:#BD976A\">lastMeasuredItemIndex</span><span style=\"color:#666666\">.</span><span style=\"color:#BD976A\">current</span><span style=\"color:#666666\"> >=</span><span style=\"color:#4C9A91\"> 0</span><span style=\"color:#666666\">)</span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">      const</span><span style=\"color:#BD976A\"> lastItem</span><span style=\"color:#666666\"> =</span><span style=\"color:#BD976A\"> measuredDataMap</span><span style=\"color:#666666\">.</span><span style=\"color:#BD976A\">current</span><span style=\"color:#666666\">[</span><span style=\"color:#BD976A\">lastMeasuredItemIndex</span><span style=\"color:#666666\">.</span><span style=\"color:#BD976A\">current</span><span style=\"color:#666666\">]</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">      offset</span><span style=\"color:#CB7676\"> +=</span><span style=\"color:#BD976A\"> lastItem</span><span style=\"color:#666666\">.</span><span style=\"color:#BD976A\">offset</span><span style=\"color:#CB7676\"> +</span><span style=\"color:#BD976A\"> lastItem</span><span style=\"color:#666666\">.</span><span style=\"color:#BD976A\">size</span></span>\n<span class=\"line\"><span style=\"color:#666666\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#4D9375\">    for</span><span style=\"color:#666666\"> (</span><span style=\"color:#CB7676\">let</span><span style=\"color:#BD976A\"> i</span><span style=\"color:#666666\"> =</span><span style=\"color:#BD976A\"> lastMeasuredItemIndex</span><span style=\"color:#666666\">.</span><span style=\"color:#BD976A\">current</span><span style=\"color:#CB7676\"> +</span><span style=\"color:#4C9A91\"> 1</span><span style=\"color:#666666\">;</span><span style=\"color:#BD976A\"> i</span><span style=\"color:#666666\"> &#x3C;=</span><span style=\"color:#BD976A\"> index</span><span style=\"color:#666666\">;</span><span style=\"color:#BD976A\"> i</span><span style=\"color:#CB7676\">++</span><span style=\"color:#666666\">)</span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">      measuredDataMap</span><span style=\"color:#666666\">.</span><span style=\"color:#BD976A\">current</span><span style=\"color:#666666\">[</span><span style=\"color:#BD976A\">i</span><span style=\"color:#666666\">]</span><span style=\"color:#666666\"> =</span><span style=\"color:#666666\"> {</span><span style=\"color:#B8A965\"> size</span><span style=\"color:#666666\">:</span><span style=\"color:#BD976A\"> itemEstimatedSize</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> offset</span><span style=\"color:#666666\"> }</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">      offset</span><span style=\"color:#CB7676\"> +=</span><span style=\"color:#BD976A\"> itemEstimatedSize</span></span>\n<span class=\"line\"><span style=\"color:#666666\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#BD976A\">    lastMeasuredItemIndex</span><span style=\"color:#666666\">.</span><span style=\"color:#BD976A\">current</span><span style=\"color:#666666\"> =</span><span style=\"color:#BD976A\"> index</span></span>\n<span class=\"line\"><span style=\"color:#666666\">  }</span></span>\n<span class=\"line\"><span style=\"color:#4D9375\">  return</span><span style=\"color:#BD976A\"> measuredDataMap</span><span style=\"color:#666666\">.</span><span style=\"color:#BD976A\">current</span><span style=\"color:#666666\">[</span><span style=\"color:#BD976A\">index</span><span style=\"color:#666666\">]</span></span>\n<span class=\"line\"><span style=\"color:#666666\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#CB7676\">const</span><span style=\"color:#80A665\"> binarySearch</span><span style=\"color:#666666\"> =</span><span style=\"color:#666666\"> (</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  props</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">DynamicSizeListProps</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  low</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">number</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  high</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">number</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  target</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">number</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  lastMeasuredItemIndex</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">React</span><span style=\"color:#666666\">.</span><span style=\"color:#5DA994\">RefObject</span><span style=\"color:#666666\">&#x3C;</span><span style=\"color:#5DA994\">number</span><span style=\"color:#666666\">>,</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  measuredDataMap</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">React</span><span style=\"color:#666666\">.</span><span style=\"color:#5DA994\">RefObject</span><span style=\"color:#666666\">&#x3C;</span><span style=\"color:#5DA994\">MeasuredDataMap</span><span style=\"color:#666666\">></span></span>\n<span class=\"line\"><span style=\"color:#666666\">)</span><span style=\"color:#666666\"> =></span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#4D9375\">  while</span><span style=\"color:#666666\"> (</span><span style=\"color:#BD976A\">low</span><span style=\"color:#666666\"> &#x3C;=</span><span style=\"color:#BD976A\"> high</span><span style=\"color:#666666\">)</span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">    const</span><span style=\"color:#BD976A\"> mid</span><span style=\"color:#666666\"> =</span><span style=\"color:#BD976A\"> low</span><span style=\"color:#CB7676\"> +</span><span style=\"color:#BD976A\"> Math</span><span style=\"color:#666666\">.</span><span style=\"color:#80A665\">floor</span><span style=\"color:#666666\">((</span><span style=\"color:#BD976A\">high</span><span style=\"color:#CB7676\"> -</span><span style=\"color:#BD976A\"> low</span><span style=\"color:#666666\">)</span><span style=\"color:#CB7676\"> /</span><span style=\"color:#4C9A91\"> 2</span><span style=\"color:#666666\">)</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">    const</span><span style=\"color:#BD976A\"> currentOffset</span><span style=\"color:#666666\"> =</span><span style=\"color:#80A665\"> getItemLayoutdata</span><span style=\"color:#666666\">(</span><span style=\"color:#BD976A\">props</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> mid</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> lastMeasuredItemIndex</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> measuredDataMap</span><span style=\"color:#666666\">).</span><span style=\"color:#BD976A\">offset</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#4D9375\">    if</span><span style=\"color:#666666\"> (</span><span style=\"color:#BD976A\">currentOffset</span><span style=\"color:#CB7676\"> ===</span><span style=\"color:#BD976A\"> target</span><span style=\"color:#666666\">)</span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#4D9375\">      return</span><span style=\"color:#BD976A\"> mid</span></span>\n<span class=\"line\"><span style=\"color:#666666\">    }</span><span style=\"color:#4D9375\"> else</span><span style=\"color:#4D9375\"> if</span><span style=\"color:#666666\"> (</span><span style=\"color:#BD976A\">currentOffset</span><span style=\"color:#666666\"> &#x3C;</span><span style=\"color:#BD976A\"> target</span><span style=\"color:#666666\">)</span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">      low</span><span style=\"color:#666666\"> =</span><span style=\"color:#BD976A\"> mid</span><span style=\"color:#CB7676\"> +</span><span style=\"color:#4C9A91\"> 1</span></span>\n<span class=\"line\"><span style=\"color:#666666\">    }</span><span style=\"color:#4D9375\"> else</span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">      high</span><span style=\"color:#666666\"> =</span><span style=\"color:#BD976A\"> mid</span><span style=\"color:#CB7676\"> -</span><span style=\"color:#4C9A91\"> 1</span></span>\n<span class=\"line\"><span style=\"color:#666666\">    }</span></span>\n<span class=\"line\"><span style=\"color:#666666\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#4D9375\">  return</span><span style=\"color:#BD976A\"> Math</span><span style=\"color:#666666\">.</span><span style=\"color:#80A665\">max</span><span style=\"color:#666666\">(</span><span style=\"color:#BD976A\">low</span><span style=\"color:#CB7676\"> -</span><span style=\"color:#4C9A91\"> 1</span><span style=\"color:#666666\">)</span></span>\n<span class=\"line\"><span style=\"color:#666666\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#CB7676\">const</span><span style=\"color:#80A665\"> expSearch</span><span style=\"color:#666666\"> =</span><span style=\"color:#666666\"> (</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  props</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">DynamicSizeListProps</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  index</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">number</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  target</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">number</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  lastMeasuredItemIndex</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">React</span><span style=\"color:#666666\">.</span><span style=\"color:#5DA994\">RefObject</span><span style=\"color:#666666\">&#x3C;</span><span style=\"color:#5DA994\">number</span><span style=\"color:#666666\">>,</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  measuredDataMap</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">React</span><span style=\"color:#666666\">.</span><span style=\"color:#5DA994\">RefObject</span><span style=\"color:#666666\">&#x3C;</span><span style=\"color:#5DA994\">MeasuredDataMap</span><span style=\"color:#666666\">></span></span>\n<span class=\"line\"><span style=\"color:#666666\">)</span><span style=\"color:#666666\"> =></span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">  const</span><span style=\"color:#666666\"> {</span><span style=\"color:#BD976A\"> itemCount</span><span style=\"color:#666666\"> }</span><span style=\"color:#666666\"> =</span><span style=\"color:#BD976A\"> props</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">  let</span><span style=\"color:#BD976A\"> exp</span><span style=\"color:#666666\"> =</span><span style=\"color:#4C9A91\"> 1</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#4D9375\">  while</span><span style=\"color:#666666\"> (</span><span style=\"color:#BD976A\">index</span><span style=\"color:#666666\"> &#x3C;</span><span style=\"color:#BD976A\"> itemCount</span><span style=\"color:#CB7676\"> &#x26;&#x26;</span><span style=\"color:#80A665\"> getItemLayoutdata</span><span style=\"color:#666666\">(</span><span style=\"color:#BD976A\">props</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> index</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> lastMeasuredItemIndex</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> measuredDataMap</span><span style=\"color:#666666\">).</span><span style=\"color:#BD976A\">offset</span><span style=\"color:#666666\"> &#x3C;</span><span style=\"color:#BD976A\"> target</span><span style=\"color:#666666\">)</span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">    index</span><span style=\"color:#CB7676\"> +=</span><span style=\"color:#BD976A\"> exp</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">    exp</span><span style=\"color:#CB7676\"> *=</span><span style=\"color:#4C9A91\"> 2</span></span>\n<span class=\"line\"><span style=\"color:#666666\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#4D9375\">  return</span><span style=\"color:#80A665\"> binarySearch</span><span style=\"color:#666666\">(</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">    props</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">    Math</span><span style=\"color:#666666\">.</span><span style=\"color:#80A665\">floor</span><span style=\"color:#666666\">(</span><span style=\"color:#BD976A\">index</span><span style=\"color:#CB7676\"> /</span><span style=\"color:#4C9A91\"> 2</span><span style=\"color:#666666\">),</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">    Math</span><span style=\"color:#666666\">.</span><span style=\"color:#80A665\">min</span><span style=\"color:#666666\">(</span><span style=\"color:#BD976A\">index</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> itemCount</span><span style=\"color:#CB7676\"> -</span><span style=\"color:#4C9A91\"> 1</span><span style=\"color:#666666\">),</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">    target</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">    lastMeasuredItemIndex</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">    measuredDataMap</span></span>\n<span class=\"line\"><span style=\"color:#666666\">  )</span></span>\n<span class=\"line\"><span style=\"color:#666666\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#CB7676\">const</span><span style=\"color:#80A665\"> getStartIndex</span><span style=\"color:#666666\"> =</span><span style=\"color:#666666\"> (</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  props</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">DynamicSizeListProps</span><span style=\"color:#666666\">,</span><span style=\"color:#DBD7CAEE\"> </span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  scrollOffset</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">number</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  lastMeasuredItemIndex</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">React</span><span style=\"color:#666666\">.</span><span style=\"color:#5DA994\">RefObject</span><span style=\"color:#666666\">&#x3C;</span><span style=\"color:#5DA994\">number</span><span style=\"color:#666666\">>,</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  measuredDataMap</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">React</span><span style=\"color:#666666\">.</span><span style=\"color:#5DA994\">RefObject</span><span style=\"color:#666666\">&#x3C;</span><span style=\"color:#5DA994\">MeasuredDataMap</span><span style=\"color:#666666\">></span></span>\n<span class=\"line\"><span style=\"color:#666666\">):</span><span style=\"color:#5DA994\"> number</span><span style=\"color:#666666\"> =></span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#4D9375\">  if</span><span style=\"color:#666666\"> (</span><span style=\"color:#BD976A\">scrollOffset</span><span style=\"color:#CB7676\"> ===</span><span style=\"color:#4C9A91\"> 0</span><span style=\"color:#666666\">)</span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#4D9375\">    return</span><span style=\"color:#4C9A91\"> 0</span></span>\n<span class=\"line\"><span style=\"color:#666666\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#4D9375\">  if</span><span style=\"color:#666666\"> (</span><span style=\"color:#BD976A\">measuredDataMap</span><span style=\"color:#666666\">.</span><span style=\"color:#BD976A\">current</span><span style=\"color:#666666\">[</span><span style=\"color:#BD976A\">lastMeasuredItemIndex</span><span style=\"color:#666666\">.</span><span style=\"color:#BD976A\">current</span><span style=\"color:#666666\">].</span><span style=\"color:#BD976A\">offset</span><span style=\"color:#666666\"> >=</span><span style=\"color:#BD976A\"> scrollOffset</span><span style=\"color:#666666\">)</span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#4D9375\">    return</span><span style=\"color:#80A665\"> binarySearch</span><span style=\"color:#666666\">(</span><span style=\"color:#BD976A\">props</span><span style=\"color:#666666\">,</span><span style=\"color:#4C9A91\"> 0</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> lastMeasuredItemIndex</span><span style=\"color:#666666\">.</span><span style=\"color:#BD976A\">current</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> scrollOffset</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> lastMeasuredItemIndex</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> measuredDataMap</span><span style=\"color:#666666\">)</span></span>\n<span class=\"line\"><span style=\"color:#666666\">  }</span></span>\n<span class=\"line\"><span style=\"color:#4D9375\">  return</span><span style=\"color:#80A665\"> expSearch</span><span style=\"color:#666666\">(</span><span style=\"color:#BD976A\">props</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> Math</span><span style=\"color:#666666\">.</span><span style=\"color:#80A665\">max</span><span style=\"color:#666666\">(</span><span style=\"color:#4C9A91\">0</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> lastMeasuredItemIndex</span><span style=\"color:#666666\">.</span><span style=\"color:#BD976A\">current</span><span style=\"color:#666666\">),</span><span style=\"color:#BD976A\"> scrollOffset</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> lastMeasuredItemIndex</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> measuredDataMap</span><span style=\"color:#666666\">)</span></span>\n<span class=\"line\"><span style=\"color:#666666\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#CB7676\">const</span><span style=\"color:#80A665\"> getEndIndex</span><span style=\"color:#666666\"> =</span><span style=\"color:#666666\"> (</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  props</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">DynamicSizeListProps</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  startIndex</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">number</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  lastMeasuredItemIndex</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">React</span><span style=\"color:#666666\">.</span><span style=\"color:#5DA994\">RefObject</span><span style=\"color:#666666\">&#x3C;</span><span style=\"color:#5DA994\">number</span><span style=\"color:#666666\">>,</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  measuredDataMap</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">React</span><span style=\"color:#666666\">.</span><span style=\"color:#5DA994\">RefObject</span><span style=\"color:#666666\">&#x3C;</span><span style=\"color:#5DA994\">MeasuredDataMap</span><span style=\"color:#666666\">></span></span>\n<span class=\"line\"><span style=\"color:#666666\">):</span><span style=\"color:#5DA994\"> number</span><span style=\"color:#666666\"> =></span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">  const</span><span style=\"color:#666666\"> {</span><span style=\"color:#BD976A\"> height</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> itemCount</span><span style=\"color:#666666\"> }</span><span style=\"color:#666666\"> =</span><span style=\"color:#BD976A\"> props</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">  const</span><span style=\"color:#BD976A\"> startItem</span><span style=\"color:#666666\"> =</span><span style=\"color:#80A665\"> getItemLayoutdata</span><span style=\"color:#666666\">(</span><span style=\"color:#BD976A\">props</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> startIndex</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> lastMeasuredItemIndex</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> measuredDataMap</span><span style=\"color:#666666\">)</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">  const</span><span style=\"color:#BD976A\"> maxOffset</span><span style=\"color:#666666\"> =</span><span style=\"color:#BD976A\"> startItem</span><span style=\"color:#666666\">.</span><span style=\"color:#BD976A\">offset</span><span style=\"color:#CB7676\"> +</span><span style=\"color:#BD976A\"> height</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">  let</span><span style=\"color:#BD976A\"> offset</span><span style=\"color:#666666\"> =</span><span style=\"color:#BD976A\"> startItem</span><span style=\"color:#666666\">.</span><span style=\"color:#BD976A\">offset</span><span style=\"color:#CB7676\"> +</span><span style=\"color:#BD976A\"> startItem</span><span style=\"color:#666666\">.</span><span style=\"color:#BD976A\">size</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">  let</span><span style=\"color:#BD976A\"> endIndex</span><span style=\"color:#666666\"> =</span><span style=\"color:#BD976A\"> startIndex</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#4D9375\">  while</span><span style=\"color:#666666\"> (</span><span style=\"color:#BD976A\">offset</span><span style=\"color:#666666\"> &#x3C;=</span><span style=\"color:#BD976A\"> maxOffset</span><span style=\"color:#CB7676\"> &#x26;&#x26;</span><span style=\"color:#BD976A\"> endIndex</span><span style=\"color:#666666\"> &#x3C;</span><span style=\"color:#BD976A\"> itemCount</span><span style=\"color:#CB7676\"> -</span><span style=\"color:#4C9A91\"> 1</span><span style=\"color:#666666\">)</span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">    endIndex</span><span style=\"color:#CB7676\">++</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">    const</span><span style=\"color:#BD976A\"> currentItemLayout</span><span style=\"color:#666666\"> =</span><span style=\"color:#80A665\"> getItemLayoutdata</span><span style=\"color:#666666\">(</span><span style=\"color:#BD976A\">props</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> endIndex</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> lastMeasuredItemIndex</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> measuredDataMap</span><span style=\"color:#666666\">)</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">    offset</span><span style=\"color:#CB7676\"> +=</span><span style=\"color:#BD976A\"> currentItemLayout</span><span style=\"color:#666666\">.</span><span style=\"color:#BD976A\">size</span></span>\n<span class=\"line\"><span style=\"color:#666666\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#4D9375\">  return</span><span style=\"color:#BD976A\"> endIndex</span></span>\n<span class=\"line\"><span style=\"color:#666666\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#CB7676\">const</span><span style=\"color:#80A665\"> getRangeToRender</span><span style=\"color:#666666\"> =</span><span style=\"color:#666666\"> (</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  props</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">DynamicSizeListProps</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  scrollOffset</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">number</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  lastMeasuredItemIndex</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">React</span><span style=\"color:#666666\">.</span><span style=\"color:#5DA994\">RefObject</span><span style=\"color:#666666\">&#x3C;</span><span style=\"color:#5DA994\">number</span><span style=\"color:#666666\">>,</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  measuredDataMap</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">React</span><span style=\"color:#666666\">.</span><span style=\"color:#5DA994\">RefObject</span><span style=\"color:#666666\">&#x3C;</span><span style=\"color:#5DA994\">MeasuredDataMap</span><span style=\"color:#666666\">></span></span>\n<span class=\"line\"><span style=\"color:#666666\">):</span><span style=\"color:#666666\"> [</span><span style=\"color:#5DA994\">number</span><span style=\"color:#666666\">,</span><span style=\"color:#5DA994\"> number</span><span style=\"color:#666666\">]</span><span style=\"color:#666666\"> =></span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">  const</span><span style=\"color:#666666\"> {</span><span style=\"color:#BD976A\"> itemCount</span><span style=\"color:#666666\"> }</span><span style=\"color:#666666\"> =</span><span style=\"color:#BD976A\"> props</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">  const</span><span style=\"color:#BD976A\"> startIndex</span><span style=\"color:#666666\"> =</span><span style=\"color:#80A665\"> getStartIndex</span><span style=\"color:#666666\">(</span><span style=\"color:#BD976A\">props</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> scrollOffset</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> lastMeasuredItemIndex</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> measuredDataMap</span><span style=\"color:#666666\">)</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">  const</span><span style=\"color:#BD976A\"> endIndex</span><span style=\"color:#666666\"> =</span><span style=\"color:#80A665\"> getEndIndex</span><span style=\"color:#666666\">(</span><span style=\"color:#BD976A\">props</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> startIndex</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> lastMeasuredItemIndex</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> measuredDataMap</span><span style=\"color:#666666\">)</span></span>\n<span class=\"line\"><span style=\"color:#4D9375\">  return</span><span style=\"color:#666666\"> [</span><span style=\"color:#BD976A\">Math</span><span style=\"color:#666666\">.</span><span style=\"color:#80A665\">max</span><span style=\"color:#666666\">(</span><span style=\"color:#4C9A91\">0</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> startIndex</span><span style=\"color:#CB7676\"> -</span><span style=\"color:#4C9A91\"> 2</span><span style=\"color:#666666\">),</span><span style=\"color:#BD976A\"> Math</span><span style=\"color:#666666\">.</span><span style=\"color:#80A665\">min</span><span style=\"color:#666666\">(</span><span style=\"color:#BD976A\">itemCount</span><span style=\"color:#CB7676\"> -</span><span style=\"color:#4C9A91\"> 1</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> endIndex</span><span style=\"color:#CB7676\"> +</span><span style=\"color:#4C9A91\"> 2</span><span style=\"color:#666666\">)]</span></span>\n<span class=\"line\"><span style=\"color:#666666\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#CB7676\">interface</span><span style=\"color:#5DA994\"> ListItemProps</span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  index</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">number</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  style</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">React</span><span style=\"color:#666666\">.</span><span style=\"color:#5DA994\">CSSProperties</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  ChildComp</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">React</span><span style=\"color:#666666\">.</span><span style=\"color:#5DA994\">ComponentType</span><span style=\"color:#666666\">&#x3C;{ </span><span style=\"color:#BD976A\">index</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">number</span><span style=\"color:#666666\"> }></span></span>\n<span class=\"line\"><span style=\"color:#80A665\">  onSizeChange</span><span style=\"color:#666666\">: (</span><span style=\"color:#BD976A\">index</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">number</span><span style=\"color:#666666\">, </span><span style=\"color:#BD976A\">domNode</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">HTMLElement</span><span style=\"color:#666666\">) => </span><span style=\"color:#5DA994\">void</span></span>\n<span class=\"line\"><span style=\"color:#666666\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#CB7676\">const</span><span style=\"color:#BD976A\"> ListItem</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">React</span><span style=\"color:#666666\">.</span><span style=\"color:#5DA994\">FC</span><span style=\"color:#666666\">&#x3C;</span><span style=\"color:#5DA994\">ListItemProps</span><span style=\"color:#666666\">> =</span><span style=\"color:#BD976A\"> React</span><span style=\"color:#666666\">.</span><span style=\"color:#80A665\">memo</span><span style=\"color:#666666\">(</span></span>\n<span class=\"line\"><span style=\"color:#666666\">  ({</span><span style=\"color:#BD976A\"> index</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> style</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> ChildComp</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> onSizeChange</span><span style=\"color:#666666\"> })</span><span style=\"color:#666666\"> =></span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">    const</span><span style=\"color:#BD976A\"> domRef</span><span style=\"color:#666666\"> =</span><span style=\"color:#80A665\"> useRef</span><span style=\"color:#666666\">&#x3C;</span><span style=\"color:#5DA994\">HTMLDivElement</span><span style=\"color:#666666\">>(</span><span style=\"color:#CB7676\">null</span><span style=\"color:#666666\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#80A665\">    useEffect</span><span style=\"color:#666666\">(()</span><span style=\"color:#666666\"> =></span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#4D9375\">      if</span><span style=\"color:#666666\"> (</span><span style=\"color:#CB7676\">!</span><span style=\"color:#BD976A\">domRef</span><span style=\"color:#666666\">.</span><span style=\"color:#BD976A\">current</span><span style=\"color:#666666\">)</span><span style=\"color:#4D9375\"> return</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">      const</span><span style=\"color:#BD976A\"> domNode</span><span style=\"color:#666666\"> =</span><span style=\"color:#BD976A\"> domRef</span><span style=\"color:#666666\">.</span><span style=\"color:#BD976A\">current</span><span style=\"color:#666666\">.</span><span style=\"color:#BD976A\">firstChild</span><span style=\"color:#4D9375\"> as</span><span style=\"color:#5DA994\"> HTMLElement</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">      const</span><span style=\"color:#BD976A\"> resizeObserver</span><span style=\"color:#666666\"> =</span><span style=\"color:#CB7676\"> new</span><span style=\"color:#80A665\"> ResizeObserver</span><span style=\"color:#666666\">(()</span><span style=\"color:#666666\"> =></span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#80A665\">        onSizeChange</span><span style=\"color:#666666\">(</span><span style=\"color:#BD976A\">index</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> domNode</span><span style=\"color:#666666\">)</span></span>\n<span class=\"line\"><span style=\"color:#666666\">      })</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">      resizeObserver</span><span style=\"color:#666666\">.</span><span style=\"color:#80A665\">observe</span><span style=\"color:#666666\">(</span><span style=\"color:#BD976A\">domNode</span><span style=\"color:#666666\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#4D9375\">      return</span><span style=\"color:#666666\"> ()</span><span style=\"color:#666666\"> =></span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">        resizeObserver</span><span style=\"color:#666666\">.</span><span style=\"color:#80A665\">unobserve</span><span style=\"color:#666666\">(</span><span style=\"color:#BD976A\">domNode</span><span style=\"color:#666666\">)</span></span>\n<span class=\"line\"><span style=\"color:#666666\">      }</span></span>\n<span class=\"line\"><span style=\"color:#666666\">    },</span><span style=\"color:#666666\"> [</span><span style=\"color:#BD976A\">index</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> onSizeChange</span><span style=\"color:#666666\">])</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#4D9375\">    return</span><span style=\"color:#666666\"> (</span></span>\n<span class=\"line\"><span style=\"color:#666666\">      &#x3C;</span><span style=\"color:#4D9375\">div</span><span style=\"color:#BD976A\"> style</span><span style=\"color:#666666\">={</span><span style=\"color:#BD976A\">style</span><span style=\"color:#666666\">}</span><span style=\"color:#BD976A\"> ref</span><span style=\"color:#666666\">={</span><span style=\"color:#BD976A\">domRef</span><span style=\"color:#666666\">}></span></span>\n<span class=\"line\"><span style=\"color:#666666\">        &#x3C;</span><span style=\"color:#B8A965\">ChildComp</span><span style=\"color:#BD976A\"> key</span><span style=\"color:#666666\">={</span><span style=\"color:#BD976A\">index</span><span style=\"color:#666666\">}</span><span style=\"color:#BD976A\"> index</span><span style=\"color:#666666\">={</span><span style=\"color:#BD976A\">index</span><span style=\"color:#666666\">}</span><span style=\"color:#666666\"> /></span></span>\n<span class=\"line\"><span style=\"color:#666666\">      &#x3C;/</span><span style=\"color:#4D9375\">div</span><span style=\"color:#666666\">></span></span>\n<span class=\"line\"><span style=\"color:#666666\">    )</span></span>\n<span class=\"line\"><span style=\"color:#666666\">  },</span></span>\n<span class=\"line\"><span style=\"color:#666666\">  (</span><span style=\"color:#BD976A\">prevProps</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> nextProps</span><span style=\"color:#666666\">)</span><span style=\"color:#666666\"> =></span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">    prevProps</span><span style=\"color:#666666\">.</span><span style=\"color:#BD976A\">index</span><span style=\"color:#CB7676\"> ===</span><span style=\"color:#BD976A\"> nextProps</span><span style=\"color:#666666\">.</span><span style=\"color:#BD976A\">index</span><span style=\"color:#CB7676\"> &#x26;&#x26;</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">    prevProps</span><span style=\"color:#666666\">.</span><span style=\"color:#BD976A\">style</span><span style=\"color:#666666\">.</span><span style=\"color:#BD976A\">top</span><span style=\"color:#CB7676\"> ===</span><span style=\"color:#BD976A\"> nextProps</span><span style=\"color:#666666\">.</span><span style=\"color:#BD976A\">style</span><span style=\"color:#666666\">.</span><span style=\"color:#BD976A\">top</span><span style=\"color:#CB7676\"> &#x26;&#x26;</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">    prevProps</span><span style=\"color:#666666\">.</span><span style=\"color:#BD976A\">style</span><span style=\"color:#666666\">.</span><span style=\"color:#BD976A\">height</span><span style=\"color:#CB7676\"> ===</span><span style=\"color:#BD976A\"> nextProps</span><span style=\"color:#666666\">.</span><span style=\"color:#BD976A\">style</span><span style=\"color:#666666\">.</span><span style=\"color:#BD976A\">height</span></span>\n<span class=\"line\"><span style=\"color:#666666\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#4D9375\">export</span><span style=\"color:#CB7676\"> const</span><span style=\"color:#80A665\"> DynamicSizeList</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">React</span><span style=\"color:#666666\">.</span><span style=\"color:#5DA994\">FC</span><span style=\"color:#666666\">&#x3C;</span><span style=\"color:#5DA994\">DynamicSizeListProps</span><span style=\"color:#666666\">> =</span><span style=\"color:#666666\"> (</span><span style=\"color:#BD976A\">props</span><span style=\"color:#666666\">)</span><span style=\"color:#666666\"> =></span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">  const</span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">    height</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">    width</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">    itemCount</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">    itemEstimatedSize</span><span style=\"color:#666666\"> =</span><span style=\"color:#4C9A91\"> 50</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">    children</span><span style=\"color:#666666\">:</span><span style=\"color:#BD976A\"> Child</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#666666\">  }</span><span style=\"color:#666666\"> =</span><span style=\"color:#BD976A\"> props</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">  const</span><span style=\"color:#666666\"> [</span><span style=\"color:#BD976A\">scrollOffset</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> setScrollOffset</span><span style=\"color:#666666\">]</span><span style=\"color:#666666\"> =</span><span style=\"color:#80A665\"> useState</span><span style=\"color:#666666\">(</span><span style=\"color:#4C9A91\">0</span><span style=\"color:#666666\">)</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">  const</span><span style=\"color:#666666\"> [,</span><span style=\"color:#BD976A\"> setState</span><span style=\"color:#666666\">]</span><span style=\"color:#666666\"> =</span><span style=\"color:#80A665\"> useState</span><span style=\"color:#666666\">({})</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#CB7676\">  const</span><span style=\"color:#BD976A\"> measuredDataMap</span><span style=\"color:#666666\"> =</span><span style=\"color:#80A665\"> useRef</span><span style=\"color:#666666\">&#x3C;</span><span style=\"color:#5DA994\">MeasuredDataMap</span><span style=\"color:#666666\">>({})</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">  const</span><span style=\"color:#BD976A\"> lastMeasuredItemIndex</span><span style=\"color:#666666\"> =</span><span style=\"color:#80A665\"> useRef</span><span style=\"color:#666666\">&#x3C;</span><span style=\"color:#5DA994\">number</span><span style=\"color:#666666\">>(</span><span style=\"color:#CB7676\">-</span><span style=\"color:#4C9A91\">1</span><span style=\"color:#666666\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#CB7676\">  const</span><span style=\"color:#BD976A\"> containerStyle</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">CSSProperties</span><span style=\"color:#666666\"> =</span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#B8A965\">    position</span><span style=\"color:#666666\">:</span><span style=\"color:#C98A7D77\"> '</span><span style=\"color:#C98A7D\">relative</span><span style=\"color:#C98A7D77\">'</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">    width</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">    height</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#B8A965\">    overflow</span><span style=\"color:#666666\">:</span><span style=\"color:#C98A7D77\"> '</span><span style=\"color:#C98A7D\">auto</span><span style=\"color:#C98A7D77\">'</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#B8A965\">    willChange</span><span style=\"color:#666666\">:</span><span style=\"color:#C98A7D77\"> '</span><span style=\"color:#C98A7D\">transform</span><span style=\"color:#C98A7D77\">'</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#666666\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#CB7676\">  const</span><span style=\"color:#BD976A\"> contentStyle</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">CSSProperties</span><span style=\"color:#666666\"> =</span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#B8A965\">    height</span><span style=\"color:#666666\">:</span><span style=\"color:#80A665\"> estimateHeight</span><span style=\"color:#666666\">(</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">      itemEstimatedSize</span><span style=\"color:#666666\">,</span><span style=\"color:#DBD7CAEE\"> </span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">      itemCount</span><span style=\"color:#666666\">,</span><span style=\"color:#DBD7CAEE\"> </span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">      lastMeasuredItemIndex</span><span style=\"color:#666666\">,</span><span style=\"color:#DBD7CAEE\"> </span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">      measuredDataMap</span></span>\n<span class=\"line\"><span style=\"color:#666666\">    ),</span></span>\n<span class=\"line\"><span style=\"color:#B8A965\">    width</span><span style=\"color:#666666\">:</span><span style=\"color:#C98A7D77\"> '</span><span style=\"color:#C98A7D\">100%</span><span style=\"color:#C98A7D77\">'</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#666666\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#CB7676\">  const</span><span style=\"color:#80A665\"> sizeChangeHandle</span><span style=\"color:#666666\"> =</span><span style=\"color:#666666\"> (</span><span style=\"color:#BD976A\">index</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">number</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> domNode</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">HTMLElement</span><span style=\"color:#666666\">)</span><span style=\"color:#666666\"> =></span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">    const</span><span style=\"color:#BD976A\"> height</span><span style=\"color:#666666\"> =</span><span style=\"color:#BD976A\"> domNode</span><span style=\"color:#666666\">.</span><span style=\"color:#BD976A\">offsetHeight</span></span>\n<span class=\"line\"><span style=\"color:#4D9375\">    if</span><span style=\"color:#666666\"> (</span><span style=\"color:#BD976A\">measuredDataMap</span><span style=\"color:#666666\">.</span><span style=\"color:#BD976A\">current</span><span style=\"color:#666666\">[</span><span style=\"color:#BD976A\">index</span><span style=\"color:#666666\">]?.</span><span style=\"color:#BD976A\">size</span><span style=\"color:#CB7676\"> !==</span><span style=\"color:#BD976A\"> height</span><span style=\"color:#666666\">)</span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">      measuredDataMap</span><span style=\"color:#666666\">.</span><span style=\"color:#BD976A\">current</span><span style=\"color:#666666\">[</span><span style=\"color:#BD976A\">index</span><span style=\"color:#666666\">].</span><span style=\"color:#BD976A\">size</span><span style=\"color:#666666\"> =</span><span style=\"color:#BD976A\"> height</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#CB7676\">      let</span><span style=\"color:#BD976A\"> offset</span><span style=\"color:#666666\"> =</span><span style=\"color:#BD976A\"> measuredDataMap</span><span style=\"color:#666666\">.</span><span style=\"color:#BD976A\">current</span><span style=\"color:#666666\">[</span><span style=\"color:#BD976A\">index</span><span style=\"color:#666666\">].</span><span style=\"color:#BD976A\">offset</span><span style=\"color:#CB7676\"> +</span><span style=\"color:#BD976A\"> height</span></span>\n<span class=\"line\"><span style=\"color:#4D9375\">      for</span><span style=\"color:#666666\"> (</span><span style=\"color:#CB7676\">let</span><span style=\"color:#BD976A\"> i</span><span style=\"color:#666666\"> =</span><span style=\"color:#BD976A\"> index</span><span style=\"color:#CB7676\"> +</span><span style=\"color:#4C9A91\"> 1</span><span style=\"color:#666666\">;</span><span style=\"color:#BD976A\"> i</span><span style=\"color:#666666\"> &#x3C;=</span><span style=\"color:#BD976A\"> lastMeasuredItemIndex</span><span style=\"color:#666666\">.</span><span style=\"color:#BD976A\">current</span><span style=\"color:#666666\">;</span><span style=\"color:#BD976A\"> i</span><span style=\"color:#CB7676\">++</span><span style=\"color:#666666\">)</span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">        const</span><span style=\"color:#BD976A\"> layoutData</span><span style=\"color:#666666\"> =</span><span style=\"color:#BD976A\"> measuredDataMap</span><span style=\"color:#666666\">.</span><span style=\"color:#BD976A\">current</span><span style=\"color:#666666\">[</span><span style=\"color:#BD976A\">i</span><span style=\"color:#666666\">]</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">        layoutData</span><span style=\"color:#666666\">.</span><span style=\"color:#BD976A\">offset</span><span style=\"color:#666666\"> =</span><span style=\"color:#BD976A\"> offset</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">        offset</span><span style=\"color:#CB7676\"> +=</span><span style=\"color:#BD976A\"> layoutData</span><span style=\"color:#666666\">.</span><span style=\"color:#BD976A\">size</span></span>\n<span class=\"line\"><span style=\"color:#666666\">      }</span></span>\n<span class=\"line\"><span style=\"color:#80A665\">      setState</span><span style=\"color:#666666\">({})</span></span>\n<span class=\"line\"><span style=\"color:#666666\">    }</span></span>\n<span class=\"line\"><span style=\"color:#666666\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#CB7676\">  const</span><span style=\"color:#80A665\"> getCurrentChildren</span><span style=\"color:#666666\"> =</span><span style=\"color:#666666\"> ()</span><span style=\"color:#666666\"> =></span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">    const</span><span style=\"color:#666666\"> [</span><span style=\"color:#BD976A\">startIndex</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> endIndex</span><span style=\"color:#666666\">]</span><span style=\"color:#666666\"> =</span><span style=\"color:#80A665\"> getRangeToRender</span><span style=\"color:#666666\">(</span><span style=\"color:#BD976A\">props</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> scrollOffset</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> lastMeasuredItemIndex</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> measuredDataMap</span><span style=\"color:#666666\">)</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">    const</span><span style=\"color:#BD976A\"> items</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">ReactNode</span><span style=\"color:#666666\">[] =</span><span style=\"color:#666666\"> []</span></span>\n<span class=\"line\"><span style=\"color:#4D9375\">    for</span><span style=\"color:#666666\"> (</span><span style=\"color:#CB7676\">let</span><span style=\"color:#BD976A\"> i</span><span style=\"color:#666666\"> =</span><span style=\"color:#BD976A\"> startIndex</span><span style=\"color:#666666\">;</span><span style=\"color:#BD976A\"> i</span><span style=\"color:#666666\"> &#x3C;=</span><span style=\"color:#BD976A\"> endIndex</span><span style=\"color:#666666\">;</span><span style=\"color:#BD976A\"> i</span><span style=\"color:#CB7676\">++</span><span style=\"color:#666666\">)</span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">      const</span><span style=\"color:#BD976A\"> item</span><span style=\"color:#666666\"> =</span><span style=\"color:#80A665\"> getItemLayoutdata</span><span style=\"color:#666666\">(</span><span style=\"color:#BD976A\">props</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> i</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> lastMeasuredItemIndex</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> measuredDataMap</span><span style=\"color:#666666\">)</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">      const</span><span style=\"color:#BD976A\"> itemStyle</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">CSSProperties</span><span style=\"color:#666666\"> =</span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#B8A965\">        position</span><span style=\"color:#666666\">:</span><span style=\"color:#C98A7D77\"> '</span><span style=\"color:#C98A7D\">absolute</span><span style=\"color:#C98A7D77\">'</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#B8A965\">        height</span><span style=\"color:#666666\">:</span><span style=\"color:#BD976A\"> item</span><span style=\"color:#666666\">.</span><span style=\"color:#BD976A\">size</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#B8A965\">        width</span><span style=\"color:#666666\">:</span><span style=\"color:#C98A7D77\"> '</span><span style=\"color:#C98A7D\">100%</span><span style=\"color:#C98A7D77\">'</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#B8A965\">        top</span><span style=\"color:#666666\">:</span><span style=\"color:#BD976A\"> item</span><span style=\"color:#666666\">.</span><span style=\"color:#BD976A\">offset</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#666666\">      }</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">      items</span><span style=\"color:#666666\">.</span><span style=\"color:#80A665\">push</span><span style=\"color:#666666\">(</span></span>\n<span class=\"line\"><span style=\"color:#666666\">        &#x3C;</span><span style=\"color:#B8A965\">ListItem</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">          key</span><span style=\"color:#666666\">={</span><span style=\"color:#BD976A\">i</span><span style=\"color:#666666\">}</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">          index</span><span style=\"color:#666666\">={</span><span style=\"color:#BD976A\">i</span><span style=\"color:#666666\">}</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">          style</span><span style=\"color:#666666\">={</span><span style=\"color:#BD976A\">itemStyle</span><span style=\"color:#666666\">}</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">          ChildComp</span><span style=\"color:#666666\">={</span><span style=\"color:#BD976A\">Child</span><span style=\"color:#666666\">}</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">          onSizeChange</span><span style=\"color:#666666\">={</span><span style=\"color:#BD976A\">sizeChangeHandle</span><span style=\"color:#666666\">}</span></span>\n<span class=\"line\"><span style=\"color:#666666\">        /></span></span>\n<span class=\"line\"><span style=\"color:#666666\">      )</span></span>\n<span class=\"line\"><span style=\"color:#666666\">    }</span></span>\n<span class=\"line\"><span style=\"color:#4D9375\">    return</span><span style=\"color:#BD976A\"> items</span></span>\n<span class=\"line\"><span style=\"color:#666666\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#CB7676\">  const</span><span style=\"color:#80A665\"> scrollHandle</span><span style=\"color:#666666\"> =</span><span style=\"color:#666666\"> (</span><span style=\"color:#BD976A\">event</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">React</span><span style=\"color:#666666\">.</span><span style=\"color:#5DA994\">UIEvent</span><span style=\"color:#666666\">&#x3C;</span><span style=\"color:#5DA994\">HTMLDivElement</span><span style=\"color:#666666\">>)</span><span style=\"color:#666666\"> =></span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">    const</span><span style=\"color:#666666\"> {</span><span style=\"color:#BD976A\"> scrollTop</span><span style=\"color:#666666\"> }</span><span style=\"color:#666666\"> =</span><span style=\"color:#BD976A\"> event</span><span style=\"color:#666666\">.</span><span style=\"color:#BD976A\">currentTarget</span></span>\n<span class=\"line\"><span style=\"color:#80A665\">    setScrollOffset</span><span style=\"color:#666666\">(</span><span style=\"color:#BD976A\">scrollTop</span><span style=\"color:#666666\">)</span></span>\n<span class=\"line\"><span style=\"color:#666666\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#4D9375\">  return</span><span style=\"color:#666666\"> (</span></span>\n<span class=\"line\"><span style=\"color:#666666\">    &#x3C;</span><span style=\"color:#4D9375\">div</span><span style=\"color:#BD976A\"> style</span><span style=\"color:#666666\">={</span><span style=\"color:#BD976A\">containerStyle</span><span style=\"color:#666666\">}</span><span style=\"color:#BD976A\"> onScroll</span><span style=\"color:#666666\">={</span><span style=\"color:#BD976A\">scrollHandle</span><span style=\"color:#666666\">}></span></span>\n<span class=\"line\"><span style=\"color:#666666\">      &#x3C;</span><span style=\"color:#4D9375\">div</span><span style=\"color:#BD976A\"> style</span><span style=\"color:#666666\">={</span><span style=\"color:#BD976A\">contentStyle</span><span style=\"color:#666666\">}>{</span><span style=\"color:#80A665\">getCurrentChildren</span><span style=\"color:#666666\">()}&#x3C;/</span><span style=\"color:#4D9375\">div</span><span style=\"color:#666666\">></span></span>\n<span class=\"line\"><span style=\"color:#666666\">    &#x3C;/</span><span style=\"color:#4D9375\">div</span><span style=\"color:#666666\">></span></span>\n<span class=\"line\"><span style=\"color:#666666\">  )</span></span>\n<span class=\"line\"><span style=\"color:#666666\">}</span></span>\n<span class=\"line\"></span></code></pre>"},{"type":"file","name":"FixedSizeList.tsx","ext":".tsx","path":"C:\\Users\\郝洪坤\\Desktop\\FrontEnd\\components-show\\react-components\\src\\components-show\\VirtualList\\FixedSizeList.tsx","content":"<pre><code><span class=\"line\"><span style=\"color:#4D9375\">import</span><span style=\"color:#BD976A\"> React</span><span style=\"color:#666666\">,</span><span style=\"color:#666666\"> {</span><span style=\"color:#BD976A\"> useState</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> useRef</span><span style=\"color:#666666\"> }</span><span style=\"color:#4D9375\"> from</span><span style=\"color:#C98A7D77\"> '</span><span style=\"color:#C98A7D\">react</span><span style=\"color:#C98A7D77\">'</span></span>\n<span class=\"line\"><span style=\"color:#4D9375\">import</span><span style=\"color:#4D9375\"> type</span><span style=\"color:#666666\"> {</span><span style=\"color:#BD976A\"> CSSProperties</span><span style=\"color:#666666\"> }</span><span style=\"color:#4D9375\"> from</span><span style=\"color:#C98A7D77\"> '</span><span style=\"color:#C98A7D\">react</span><span style=\"color:#C98A7D77\">'</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#4D9375\">export</span><span style=\"color:#CB7676\"> interface</span><span style=\"color:#5DA994\"> FixedRow</span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  index</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">number</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  style</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">React</span><span style=\"color:#666666\">.</span><span style=\"color:#5DA994\">CSSProperties</span></span>\n<span class=\"line\"><span style=\"color:#666666\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#4D9375\">export</span><span style=\"color:#CB7676\"> interface</span><span style=\"color:#5DA994\"> FixedSizeList</span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  height</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">number</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  width</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">number</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  itemSize</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">number</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  itemCount</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">number</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  children</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">React</span><span style=\"color:#666666\">.</span><span style=\"color:#5DA994\">ComponentType</span><span style=\"color:#666666\">&#x3C;</span><span style=\"color:#5DA994\">FixedRow</span><span style=\"color:#666666\">></span></span>\n<span class=\"line\"><span style=\"color:#666666\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#4D9375\">export</span><span style=\"color:#CB7676\"> const</span><span style=\"color:#80A665\"> FixedSizeList</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">React</span><span style=\"color:#666666\">.</span><span style=\"color:#5DA994\">FC</span><span style=\"color:#666666\">&#x3C;</span><span style=\"color:#5DA994\">FixedSizeList</span><span style=\"color:#666666\">> =</span><span style=\"color:#666666\"> (</span><span style=\"color:#BD976A\">props</span><span style=\"color:#666666\">)</span><span style=\"color:#666666\"> =></span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">  const</span><span style=\"color:#666666\"> {</span><span style=\"color:#BD976A\"> height</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> width</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> itemCount</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> itemSize</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> children</span><span style=\"color:#666666\">:</span><span style=\"color:#BD976A\"> Child</span><span style=\"color:#666666\"> }</span><span style=\"color:#666666\"> =</span><span style=\"color:#BD976A\"> props</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">  const</span><span style=\"color:#666666\"> [</span><span style=\"color:#BD976A\">scrollOffset</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> setScrollOffset</span><span style=\"color:#666666\">]</span><span style=\"color:#666666\"> =</span><span style=\"color:#80A665\"> useState</span><span style=\"color:#666666\">&#x3C;</span><span style=\"color:#5DA994\">number</span><span style=\"color:#666666\">>(</span><span style=\"color:#4C9A91\">0</span><span style=\"color:#666666\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#CB7676\">  const</span><span style=\"color:#BD976A\"> cacheRef</span><span style=\"color:#666666\"> =</span><span style=\"color:#80A665\"> useRef</span><span style=\"color:#666666\">&#x3C;</span><span style=\"color:#5DA994\">Map</span><span style=\"color:#666666\">&#x3C;</span><span style=\"color:#5DA994\">number</span><span style=\"color:#666666\">,</span><span style=\"color:#5DA994\"> React</span><span style=\"color:#666666\">.</span><span style=\"color:#5DA994\">ReactNode</span><span style=\"color:#666666\">>>(</span><span style=\"color:#CB7676\">new</span><span style=\"color:#80A665\"> Map</span><span style=\"color:#666666\">())</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#CB7676\">  const</span><span style=\"color:#BD976A\"> containerStyle</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">CSSProperties</span><span style=\"color:#666666\"> =</span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#B8A965\">    position</span><span style=\"color:#666666\">:</span><span style=\"color:#C98A7D77\"> '</span><span style=\"color:#C98A7D\">relative</span><span style=\"color:#C98A7D77\">'</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">    width</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">    height</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#B8A965\">    overflow</span><span style=\"color:#666666\">:</span><span style=\"color:#C98A7D77\"> '</span><span style=\"color:#C98A7D\">auto</span><span style=\"color:#C98A7D77\">'</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#666666\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#CB7676\">  const</span><span style=\"color:#BD976A\"> contentStyle</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">CSSProperties</span><span style=\"color:#666666\"> =</span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#B8A965\">    height</span><span style=\"color:#666666\">:</span><span style=\"color:#BD976A\"> itemSize</span><span style=\"color:#CB7676\"> *</span><span style=\"color:#BD976A\"> itemCount</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#B8A965\">    width</span><span style=\"color:#666666\">:</span><span style=\"color:#C98A7D77\"> '</span><span style=\"color:#C98A7D\">100%</span><span style=\"color:#C98A7D77\">'</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#666666\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#CB7676\">  const</span><span style=\"color:#80A665\"> getCurrentChildren</span><span style=\"color:#666666\"> =</span><span style=\"color:#666666\"> ()</span><span style=\"color:#666666\"> =></span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">    const</span><span style=\"color:#BD976A\"> startIndex</span><span style=\"color:#666666\"> =</span><span style=\"color:#BD976A\"> Math</span><span style=\"color:#666666\">.</span><span style=\"color:#80A665\">floor</span><span style=\"color:#666666\">(</span><span style=\"color:#BD976A\">scrollOffset</span><span style=\"color:#CB7676\"> /</span><span style=\"color:#BD976A\"> itemSize</span><span style=\"color:#666666\">)</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">    const</span><span style=\"color:#BD976A\"> finalStartIndex</span><span style=\"color:#666666\"> =</span><span style=\"color:#BD976A\"> Math</span><span style=\"color:#666666\">.</span><span style=\"color:#80A665\">max</span><span style=\"color:#666666\">(</span><span style=\"color:#4C9A91\">0</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> startIndex</span><span style=\"color:#CB7676\"> -</span><span style=\"color:#4C9A91\"> 2</span><span style=\"color:#666666\">)</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">    const</span><span style=\"color:#BD976A\"> numVisible</span><span style=\"color:#666666\"> =</span><span style=\"color:#BD976A\"> Math</span><span style=\"color:#666666\">.</span><span style=\"color:#80A665\">ceil</span><span style=\"color:#666666\">(</span><span style=\"color:#BD976A\">height</span><span style=\"color:#CB7676\"> /</span><span style=\"color:#BD976A\"> itemSize</span><span style=\"color:#666666\">)</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">    const</span><span style=\"color:#BD976A\"> endIndex</span><span style=\"color:#666666\"> =</span><span style=\"color:#BD976A\"> Math</span><span style=\"color:#666666\">.</span><span style=\"color:#80A665\">min</span><span style=\"color:#666666\">(</span><span style=\"color:#BD976A\">itemCount</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> startIndex</span><span style=\"color:#CB7676\"> +</span><span style=\"color:#BD976A\"> numVisible</span><span style=\"color:#CB7676\"> +</span><span style=\"color:#4C9A91\"> 2</span><span style=\"color:#666666\">)</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">    const</span><span style=\"color:#BD976A\"> items</span><span style=\"color:#666666\"> =</span><span style=\"color:#666666\"> []</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#4D9375\">    for</span><span style=\"color:#666666\"> (</span><span style=\"color:#CB7676\">let</span><span style=\"color:#BD976A\"> i</span><span style=\"color:#666666\"> =</span><span style=\"color:#BD976A\"> finalStartIndex</span><span style=\"color:#666666\">;</span><span style=\"color:#BD976A\"> i</span><span style=\"color:#666666\"> &#x3C;</span><span style=\"color:#BD976A\"> endIndex</span><span style=\"color:#666666\">;</span><span style=\"color:#BD976A\"> i</span><span style=\"color:#CB7676\">++</span><span style=\"color:#666666\">)</span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#4D9375\">      if</span><span style=\"color:#666666\"> (</span><span style=\"color:#BD976A\">cacheRef</span><span style=\"color:#666666\">.</span><span style=\"color:#BD976A\">current</span><span style=\"color:#666666\">.</span><span style=\"color:#80A665\">has</span><span style=\"color:#666666\">(</span><span style=\"color:#BD976A\">i</span><span style=\"color:#666666\">))</span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">        items</span><span style=\"color:#666666\">.</span><span style=\"color:#80A665\">push</span><span style=\"color:#666666\">(</span><span style=\"color:#BD976A\">cacheRef</span><span style=\"color:#666666\">.</span><span style=\"color:#BD976A\">current</span><span style=\"color:#666666\">.</span><span style=\"color:#80A665\">get</span><span style=\"color:#666666\">(</span><span style=\"color:#BD976A\">i</span><span style=\"color:#666666\">))</span></span>\n<span class=\"line\"><span style=\"color:#666666\">      }</span><span style=\"color:#4D9375\"> else</span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">        const</span><span style=\"color:#BD976A\"> itemStyle</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">React</span><span style=\"color:#666666\">.</span><span style=\"color:#5DA994\">CSSProperties</span><span style=\"color:#666666\"> =</span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#B8A965\">          position</span><span style=\"color:#666666\">:</span><span style=\"color:#C98A7D77\"> '</span><span style=\"color:#C98A7D\">absolute</span><span style=\"color:#C98A7D77\">'</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#B8A965\">          height</span><span style=\"color:#666666\">:</span><span style=\"color:#BD976A\"> itemSize</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#B8A965\">          width</span><span style=\"color:#666666\">:</span><span style=\"color:#C98A7D77\"> '</span><span style=\"color:#C98A7D\">100%</span><span style=\"color:#C98A7D77\">'</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#B8A965\">          top</span><span style=\"color:#666666\">:</span><span style=\"color:#BD976A\"> itemSize</span><span style=\"color:#CB7676\"> *</span><span style=\"color:#BD976A\"> i</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#666666\">        }</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">        const</span><span style=\"color:#BD976A\"> item</span><span style=\"color:#666666\"> =</span><span style=\"color:#666666\"> &#x3C;</span><span style=\"color:#B8A965\">Child</span><span style=\"color:#BD976A\"> key</span><span style=\"color:#666666\">={</span><span style=\"color:#BD976A\">i</span><span style=\"color:#666666\">}</span><span style=\"color:#BD976A\"> index</span><span style=\"color:#666666\">={</span><span style=\"color:#BD976A\">i</span><span style=\"color:#666666\">}</span><span style=\"color:#BD976A\"> style</span><span style=\"color:#666666\">={</span><span style=\"color:#BD976A\">itemStyle</span><span style=\"color:#666666\">}>&#x3C;/</span><span style=\"color:#B8A965\">Child</span><span style=\"color:#666666\">></span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">        cacheRef</span><span style=\"color:#666666\">.</span><span style=\"color:#BD976A\">current</span><span style=\"color:#666666\">.</span><span style=\"color:#80A665\">set</span><span style=\"color:#666666\">(</span><span style=\"color:#BD976A\">i</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> item</span><span style=\"color:#666666\">)</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">        items</span><span style=\"color:#666666\">.</span><span style=\"color:#80A665\">push</span><span style=\"color:#666666\">(</span><span style=\"color:#BD976A\">item</span><span style=\"color:#666666\">)</span></span>\n<span class=\"line\"><span style=\"color:#666666\">      }</span></span>\n<span class=\"line\"><span style=\"color:#666666\">    }</span></span>\n<span class=\"line\"><span style=\"color:#4D9375\">    return</span><span style=\"color:#BD976A\"> items</span></span>\n<span class=\"line\"><span style=\"color:#666666\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#CB7676\">  const</span><span style=\"color:#80A665\"> scrollHandle</span><span style=\"color:#666666\"> =</span><span style=\"color:#666666\"> (</span><span style=\"color:#BD976A\">event</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">React</span><span style=\"color:#666666\">.</span><span style=\"color:#5DA994\">UIEvent</span><span style=\"color:#666666\">&#x3C;</span><span style=\"color:#5DA994\">HTMLDivElement</span><span style=\"color:#666666\">>):</span><span style=\"color:#5DA994\"> void</span><span style=\"color:#666666\"> =></span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">    const</span><span style=\"color:#666666\"> {</span><span style=\"color:#BD976A\"> scrollTop</span><span style=\"color:#666666\"> }</span><span style=\"color:#666666\"> =</span><span style=\"color:#BD976A\"> event</span><span style=\"color:#666666\">.</span><span style=\"color:#BD976A\">currentTarget</span></span>\n<span class=\"line\"><span style=\"color:#80A665\">    setScrollOffset</span><span style=\"color:#666666\">(</span><span style=\"color:#BD976A\">scrollTop</span><span style=\"color:#666666\">)</span></span>\n<span class=\"line\"><span style=\"color:#666666\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#4D9375\">  return</span><span style=\"color:#666666\"> (</span></span>\n<span class=\"line\"><span style=\"color:#666666\">    &#x3C;</span><span style=\"color:#4D9375\">div</span><span style=\"color:#BD976A\"> style</span><span style=\"color:#666666\">={</span><span style=\"color:#BD976A\">containerStyle</span><span style=\"color:#666666\">}</span><span style=\"color:#BD976A\"> onScroll</span><span style=\"color:#666666\">={</span><span style=\"color:#BD976A\">scrollHandle</span><span style=\"color:#666666\">}></span></span>\n<span class=\"line\"><span style=\"color:#666666\">      &#x3C;</span><span style=\"color:#4D9375\">div</span><span style=\"color:#BD976A\"> style</span><span style=\"color:#666666\">={</span><span style=\"color:#BD976A\">contentStyle</span><span style=\"color:#666666\">}>{</span><span style=\"color:#80A665\">getCurrentChildren</span><span style=\"color:#666666\">()}&#x3C;/</span><span style=\"color:#4D9375\">div</span><span style=\"color:#666666\">></span></span>\n<span class=\"line\"><span style=\"color:#666666\">    &#x3C;/</span><span style=\"color:#4D9375\">div</span><span style=\"color:#666666\">></span></span>\n<span class=\"line\"><span style=\"color:#666666\">  )</span></span>\n<span class=\"line\"><span style=\"color:#666666\">}</span></span>\n<span class=\"line\"></span></code></pre>"},{"type":"file","name":"ForShow.tsx","ext":".tsx","path":"C:\\Users\\郝洪坤\\Desktop\\FrontEnd\\components-show\\react-components\\src\\components-show\\VirtualList\\ForShow.tsx","content":"<pre><code><span class=\"line\"><span style=\"color:#4D9375\">import</span><span style=\"color:#BD976A\"> React</span><span style=\"color:#4D9375\"> from</span><span style=\"color:#C98A7D77\"> '</span><span style=\"color:#C98A7D\">react</span><span style=\"color:#C98A7D77\">'</span></span>\n<span class=\"line\"><span style=\"color:#4D9375\">import</span><span style=\"color:#666666\"> {</span><span style=\"color:#BD976A\"> DynamicSizeList</span><span style=\"color:#666666\">,</span><span style=\"color:#4D9375\"> type</span><span style=\"color:#BD976A\"> DynamicRow</span><span style=\"color:#666666\"> }</span><span style=\"color:#4D9375\"> from</span><span style=\"color:#C98A7D77\"> '</span><span style=\"color:#C98A7D\">./DynamicSizeList</span><span style=\"color:#C98A7D77\">'</span></span>\n<span class=\"line\"><span style=\"color:#4D9375\">import</span><span style=\"color:#666666\"> {</span><span style=\"color:#BD976A\"> FixedSizeList</span><span style=\"color:#666666\">,</span><span style=\"color:#4D9375\"> type</span><span style=\"color:#BD976A\"> FixedRow</span><span style=\"color:#666666\"> }</span><span style=\"color:#4D9375\"> from</span><span style=\"color:#C98A7D77\"> '</span><span style=\"color:#C98A7D\">./FixedSizeList</span><span style=\"color:#C98A7D77\">'</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#CB7676\">const</span><span style=\"color:#BD976A\"> heightCache</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">Record</span><span style=\"color:#666666\">&#x3C;</span><span style=\"color:#5DA994\">number</span><span style=\"color:#666666\">, </span><span style=\"color:#5DA994\">number</span><span style=\"color:#666666\">> =</span><span style=\"color:#666666\"> {}</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">const</span><span style=\"color:#80A665\"> Row</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">React</span><span style=\"color:#666666\">.</span><span style=\"color:#5DA994\">FC</span><span style=\"color:#666666\">&#x3C;</span><span style=\"color:#5DA994\">DynamicRow</span><span style=\"color:#666666\">> =</span><span style=\"color:#666666\"> ({</span><span style=\"color:#BD976A\"> index</span><span style=\"color:#666666\"> })</span><span style=\"color:#666666\"> =></span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#4D9375\">  if</span><span style=\"color:#666666\"> (</span><span style=\"color:#BD976A\">heightCache</span><span style=\"color:#666666\">[</span><span style=\"color:#BD976A\">index</span><span style=\"color:#666666\">]</span><span style=\"color:#CB7676\"> ===</span><span style=\"color:#CB7676\"> undefined</span><span style=\"color:#666666\">)</span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">    heightCache</span><span style=\"color:#666666\">[</span><span style=\"color:#BD976A\">index</span><span style=\"color:#666666\">]</span><span style=\"color:#666666\"> =</span><span style=\"color:#4C9A91\"> 20</span><span style=\"color:#CB7676\"> +</span><span style=\"color:#BD976A\"> Math</span><span style=\"color:#666666\">.</span><span style=\"color:#80A665\">floor</span><span style=\"color:#666666\">(</span><span style=\"color:#BD976A\">Math</span><span style=\"color:#666666\">.</span><span style=\"color:#80A665\">random</span><span style=\"color:#666666\">()</span><span style=\"color:#CB7676\"> *</span><span style=\"color:#4C9A91\"> 50</span><span style=\"color:#666666\">)</span></span>\n<span class=\"line\"><span style=\"color:#666666\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#CB7676\">  const</span><span style=\"color:#BD976A\"> style</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">React</span><span style=\"color:#666666\">.</span><span style=\"color:#5DA994\">CSSProperties</span><span style=\"color:#666666\"> =</span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#B8A965\">    height</span><span style=\"color:#666666\">:</span><span style=\"color:#BD976A\"> heightCache</span><span style=\"color:#666666\">[</span><span style=\"color:#BD976A\">index</span><span style=\"color:#666666\">],</span></span>\n<span class=\"line\"><span style=\"color:#666666\">  }</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">  const</span><span style=\"color:#BD976A\"> backgroundColorClass</span><span style=\"color:#666666\"> =</span><span style=\"color:#BD976A\"> index</span><span style=\"color:#CB7676\"> %</span><span style=\"color:#4C9A91\"> 2</span><span style=\"color:#CB7676\"> ===</span><span style=\"color:#4C9A91\"> 0</span><span style=\"color:#CB7676\"> ?</span><span style=\"color:#C98A7D77\"> '</span><span style=\"color:#C98A7D\">bg-blue-100</span><span style=\"color:#C98A7D77\">'</span><span style=\"color:#CB7676\"> :</span><span style=\"color:#C98A7D77\"> '</span><span style=\"color:#C98A7D\">bg-white</span><span style=\"color:#C98A7D77\">'</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#4D9375\">  return</span><span style=\"color:#666666\"> (</span></span>\n<span class=\"line\"><span style=\"color:#666666\">    &#x3C;</span><span style=\"color:#4D9375\">div</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">      className</span><span style=\"color:#666666\">={</span><span style=\"color:#C98A7D77\">`</span><span style=\"color:#C98A7D\">flex items-center justify-center </span><span style=\"color:#4D9375\">${</span><span style=\"color:#C98A7D\">backgroundColorClass</span><span style=\"color:#4D9375\">}</span><span style=\"color:#C98A7D77\">`</span><span style=\"color:#666666\">}</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">      style</span><span style=\"color:#666666\">={</span><span style=\"color:#BD976A\">style</span><span style=\"color:#666666\">}</span></span>\n<span class=\"line\"><span style=\"color:#666666\">    ></span></span>\n<span class=\"line\"><span style=\"color:#DBD7CAEE\">      Row </span><span style=\"color:#666666\">{</span><span style=\"color:#BD976A\">index</span><span style=\"color:#666666\">}</span></span>\n<span class=\"line\"><span style=\"color:#666666\">    &#x3C;/</span><span style=\"color:#4D9375\">div</span><span style=\"color:#666666\">></span></span>\n<span class=\"line\"><span style=\"color:#666666\">  )</span></span>\n<span class=\"line\"><span style=\"color:#666666\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#CB7676\">const</span><span style=\"color:#80A665\"> FixedRow</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">React</span><span style=\"color:#666666\">.</span><span style=\"color:#5DA994\">FC</span><span style=\"color:#666666\">&#x3C;</span><span style=\"color:#5DA994\">FixedRow</span><span style=\"color:#666666\">> =</span><span style=\"color:#666666\"> ({</span><span style=\"color:#BD976A\"> index</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> style</span><span style=\"color:#666666\"> })</span><span style=\"color:#666666\"> =></span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">  const</span><span style=\"color:#BD976A\"> backgroundColorClass</span><span style=\"color:#666666\"> =</span><span style=\"color:#BD976A\"> index</span><span style=\"color:#CB7676\"> %</span><span style=\"color:#4C9A91\"> 2</span><span style=\"color:#CB7676\"> ===</span><span style=\"color:#4C9A91\"> 0</span><span style=\"color:#CB7676\"> ?</span><span style=\"color:#C98A7D77\"> '</span><span style=\"color:#C98A7D\">bg-blue-100</span><span style=\"color:#C98A7D77\">'</span><span style=\"color:#CB7676\"> :</span><span style=\"color:#C98A7D77\"> '</span><span style=\"color:#C98A7D\">bg-white</span><span style=\"color:#C98A7D77\">'</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#4D9375\">  return</span><span style=\"color:#666666\"> (</span></span>\n<span class=\"line\"><span style=\"color:#666666\">    &#x3C;</span><span style=\"color:#4D9375\">div</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">      className</span><span style=\"color:#666666\">={</span><span style=\"color:#C98A7D77\">`</span><span style=\"color:#C98A7D\">w-full </span><span style=\"color:#4D9375\">${</span><span style=\"color:#C98A7D\">backgroundColorClass</span><span style=\"color:#4D9375\">}</span><span style=\"color:#C98A7D\"> flex items-center justify-center</span><span style=\"color:#C98A7D77\">`</span><span style=\"color:#666666\">}</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">      style</span><span style=\"color:#666666\">={{</span><span style=\"color:#666666\"> ...</span><span style=\"color:#BD976A\">style</span><span style=\"color:#666666\"> }}</span></span>\n<span class=\"line\"><span style=\"color:#666666\">    ></span></span>\n<span class=\"line\"><span style=\"color:#DBD7CAEE\">      Row </span><span style=\"color:#666666\">{</span><span style=\"color:#BD976A\">index</span><span style=\"color:#666666\">}</span></span>\n<span class=\"line\"><span style=\"color:#666666\">    &#x3C;/</span><span style=\"color:#4D9375\">div</span><span style=\"color:#666666\">></span></span>\n<span class=\"line\"><span style=\"color:#666666\">  )</span></span>\n<span class=\"line\"><span style=\"color:#666666\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#CB7676\">const</span><span style=\"color:#80A665\"> VirtualList</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">React</span><span style=\"color:#666666\">.</span><span style=\"color:#5DA994\">FC</span><span style=\"color:#666666\"> =</span><span style=\"color:#666666\"> ()</span><span style=\"color:#666666\"> =></span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#4D9375\">  return</span><span style=\"color:#666666\"> (</span></span>\n<span class=\"line\"><span style=\"color:#666666\">    &#x3C;</span><span style=\"color:#4D9375\">div</span><span style=\"color:#BD976A\"> className</span><span style=\"color:#666666\">=</span><span style=\"color:#C98A7D77\">'</span><span style=\"color:#C98A7D\">flex w-full justify-around</span><span style=\"color:#C98A7D77\">'</span><span style=\"color:#666666\">></span></span>\n<span class=\"line\"><span style=\"color:#666666\">      &#x3C;</span><span style=\"color:#B8A965\">DynamicSizeList</span><span style=\"color:#BD976A\"> height</span><span style=\"color:#666666\">={</span><span style=\"color:#4C9A91\">300</span><span style=\"color:#666666\">}</span><span style=\"color:#BD976A\"> width</span><span style=\"color:#666666\">={</span><span style=\"color:#4C9A91\">300</span><span style=\"color:#666666\">}</span><span style=\"color:#BD976A\"> itemCount</span><span style=\"color:#666666\">={</span><span style=\"color:#4C9A91\">1000000</span><span style=\"color:#666666\">}></span></span>\n<span class=\"line\"><span style=\"color:#666666\">        {</span><span style=\"color:#BD976A\">Row</span><span style=\"color:#666666\">}</span></span>\n<span class=\"line\"><span style=\"color:#666666\">      &#x3C;/</span><span style=\"color:#B8A965\">DynamicSizeList</span><span style=\"color:#666666\">></span></span>\n<span class=\"line\"><span style=\"color:#666666\">      &#x3C;</span><span style=\"color:#B8A965\">FixedSizeList</span><span style=\"color:#BD976A\"> height</span><span style=\"color:#666666\">={</span><span style=\"color:#4C9A91\">300</span><span style=\"color:#666666\">}</span><span style=\"color:#BD976A\"> width</span><span style=\"color:#666666\">={</span><span style=\"color:#4C9A91\">300</span><span style=\"color:#666666\">}</span><span style=\"color:#BD976A\"> itemSize</span><span style=\"color:#666666\">={</span><span style=\"color:#4C9A91\">50</span><span style=\"color:#666666\">}</span><span style=\"color:#BD976A\"> itemCount</span><span style=\"color:#666666\">={</span><span style=\"color:#4C9A91\">1000</span><span style=\"color:#666666\">}></span></span>\n<span class=\"line\"><span style=\"color:#666666\">        {</span><span style=\"color:#BD976A\">FixedRow</span><span style=\"color:#666666\">}</span></span>\n<span class=\"line\"><span style=\"color:#666666\">      &#x3C;/</span><span style=\"color:#B8A965\">FixedSizeList</span><span style=\"color:#666666\">></span></span>\n<span class=\"line\"><span style=\"color:#666666\">    &#x3C;/</span><span style=\"color:#4D9375\">div</span><span style=\"color:#666666\">></span></span>\n<span class=\"line\"><span style=\"color:#666666\">  )</span></span>\n<span class=\"line\"><span style=\"color:#666666\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#4D9375\">export</span><span style=\"color:#4D9375\"> default</span><span style=\"color:#BD976A\"> VirtualList</span></span>\n<span class=\"line\"></span></code></pre>"},{"type":"file","name":"index.ts","ext":".ts","path":"C:\\Users\\郝洪坤\\Desktop\\FrontEnd\\components-show\\react-components\\src\\components-show\\VirtualList\\index.ts","content":"<pre><code><span class=\"line\"><span style=\"color:#4D9375\">import</span><span style=\"color:#BD976A\"> VitualList</span><span style=\"color:#4D9375\"> from</span><span style=\"color:#C98A7D77\"> \"</span><span style=\"color:#C98A7D\">./ForShow</span><span style=\"color:#C98A7D77\">\"</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#4D9375\">export</span><span style=\"color:#4D9375\"> default</span><span style=\"color:#BD976A\"> VitualList</span></span>\n<span class=\"line\"></span></code></pre>"}]