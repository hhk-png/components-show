[{ "type": "file", "name": "DynamicSizeList.vue", "ext": ".vue", "path": "C:\\Users\\郝洪坤\\Desktop\\FrontEnd\\components-show\\vue-components\\src\\components-show\\VirtualList\\DynamicSizeList.vue", "content": "<pre><code><span class=\"line\"><span style=\"color:#666666\">&#x3C;</span><span style=\"color:#4D9375\">script</span><span style=\"color:#BD976A\"> lang</span><span style=\"color:#666666\">=</span><span style=\"color:#C98A7D77\">\"</span><span style=\"color:#C98A7D\">ts</span><span style=\"color:#C98A7D77\">\"</span><span style=\"color:#BD976A\"> setup</span><span style=\"color:#666666\">></span></span>\n<span class=\"line\"><span style=\"color:#4D9375\">import</span><span style=\"color:#666666\"> {</span><span style=\"color:#BD976A\"> computed</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> ref</span><span style=\"color:#666666\">,</span><span style=\"color:#4D9375\"> type</span><span style=\"color:#BD976A\"> CSSProperties</span><span style=\"color:#666666\"> }</span><span style=\"color:#4D9375\"> from</span><span style=\"color:#C98A7D77\"> '</span><span style=\"color:#C98A7D\">vue</span><span style=\"color:#C98A7D77\">'</span></span>\n<span class=\"line\"><span style=\"color:#4D9375\">import</span><span style=\"color:#BD976A\"> ListItem</span><span style=\"color:#4D9375\"> from</span><span style=\"color:#C98A7D77\"> '</span><span style=\"color:#C98A7D\">./ListItem.vue</span><span style=\"color:#C98A7D77\">'</span></span>\n<span class=\"line\"><span style=\"color:#4D9375\">import</span><span style=\"color:#666666\"> {</span><span style=\"color:#BD976A\"> throttle</span><span style=\"color:#666666\"> }</span><span style=\"color:#4D9375\"> from</span><span style=\"color:#C98A7D77\"> '</span><span style=\"color:#C98A7D\">./utils</span><span style=\"color:#C98A7D77\">'</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#CB7676\">interface</span><span style=\"color:#5DA994\"> MeasuredData</span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  size</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">number</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  offset</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">number</span></span>\n<span class=\"line\"><span style=\"color:#666666\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#4D9375\">export</span><span style=\"color:#CB7676\"> interface</span><span style=\"color:#5DA994\"> DynamicRow</span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  index</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">number</span></span>\n<span class=\"line\"><span style=\"color:#666666\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#4D9375\">export</span><span style=\"color:#CB7676\"> interface</span><span style=\"color:#5DA994\"> DynamicSizeListProps</span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  height</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">number</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  width</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">number</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  itemCount</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">number</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  itemEstimatedSize</span><span style=\"color:#CB7676\">?</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">number</span></span>\n<span class=\"line\"><span style=\"color:#666666\">}</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">const </span><span style=\"color:#BD976A\">props</span><span style=\"color:#666666\"> =</span><span style=\"color:#80A665\"> defineProps</span><span style=\"color:#666666\">&#x3C;</span><span style=\"color:#5DA994\">DynamicSizeListProps</span><span style=\"color:#666666\">>()</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">const </span><span style=\"color:#BD976A\">slots</span><span style=\"color:#666666\"> =</span><span style=\"color:#80A665\"> defineSlots</span><span style=\"color:#666666\">&#x3C;{</span></span>\n<span class=\"line\"><span style=\"color:#80A665\">  default</span><span style=\"color:#666666\">: (</span><span style=\"color:#BD976A\">props</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">DynamicRow</span><span style=\"color:#666666\">) => </span><span style=\"color:#5DA994\">any</span></span>\n<span class=\"line\"><span style=\"color:#666666\">}>()</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#CB7676\">const </span><span style=\"color:#BD976A\">measuredDataMap</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">Record</span><span style=\"color:#666666\">&#x3C;</span><span style=\"color:#5DA994\">number</span><span style=\"color:#666666\">, </span><span style=\"color:#5DA994\">MeasuredData</span><span style=\"color:#666666\">> =</span><span style=\"color:#666666\"> {}</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">let </span><span style=\"color:#BD976A\">lastMeasuredItemIndex</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">number</span><span style=\"color:#666666\"> =</span><span style=\"color:#CB7676\"> -</span><span style=\"color:#4C9A91\">1</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#CB7676\">const </span><span style=\"color:#80A665\">estimateHeight</span><span style=\"color:#666666\"> =</span><span style=\"color:#666666\"> (</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  defaultItemSize</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">number</span><span style=\"color:#666666\"> =</span><span style=\"color:#4C9A91\"> 50</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  itemCount</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">number</span></span>\n<span class=\"line\"><span style=\"color:#666666\">):</span><span style=\"color:#5DA994\"> number</span><span style=\"color:#666666\"> =></span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">  let </span><span style=\"color:#BD976A\">measuredHeight</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">number</span><span style=\"color:#666666\"> =</span><span style=\"color:#4C9A91\"> 0</span></span>\n<span class=\"line\"><span style=\"color:#4D9375\">  if</span><span style=\"color:#666666\"> (</span><span style=\"color:#BD976A\">lastMeasuredItemIndex</span><span style=\"color:#666666\"> >=</span><span style=\"color:#4C9A91\"> 0</span><span style=\"color:#666666\">)</span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">    const </span><span style=\"color:#BD976A\">lastItem</span><span style=\"color:#666666\"> =</span><span style=\"color:#BD976A\"> measuredDataMap</span><span style=\"color:#666666\">[</span><span style=\"color:#BD976A\">lastMeasuredItemIndex</span><span style=\"color:#666666\">]</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">    measuredHeight</span><span style=\"color:#666666\"> =</span><span style=\"color:#BD976A\"> lastItem</span><span style=\"color:#666666\">.</span><span style=\"color:#BD976A\">offset</span><span style=\"color:#CB7676\"> + </span><span style=\"color:#BD976A\">lastItem</span><span style=\"color:#666666\">.</span><span style=\"color:#BD976A\">size</span></span>\n<span class=\"line\"><span style=\"color:#666666\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#CB7676\">  const </span><span style=\"color:#BD976A\">unMeasuredItemsCount</span><span style=\"color:#666666\"> =</span><span style=\"color:#BD976A\"> itemCount</span><span style=\"color:#CB7676\"> - </span><span style=\"color:#BD976A\">lastMeasuredItemIndex</span><span style=\"color:#CB7676\"> - </span><span style=\"color:#4C9A91\">1</span></span>\n<span class=\"line\"><span style=\"color:#4D9375\">  return</span><span style=\"color:#BD976A\"> measuredHeight</span><span style=\"color:#CB7676\"> + </span><span style=\"color:#BD976A\">unMeasuredItemsCount</span><span style=\"color:#CB7676\"> * </span><span style=\"color:#BD976A\">defaultItemSize</span></span>\n<span class=\"line\"><span style=\"color:#666666\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#CB7676\">const </span><span style=\"color:#80A665\">getItemLayoutdata</span><span style=\"color:#666666\"> =</span><span style=\"color:#666666\"> (</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  props</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">DynamicSizeListProps</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  index</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">number</span></span>\n<span class=\"line\"><span style=\"color:#666666\">):</span><span style=\"color:#5DA994\"> MeasuredData</span><span style=\"color:#666666\"> =></span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">  const </span><span style=\"color:#666666\">{</span><span style=\"color:#BD976A\"> itemEstimatedSize</span><span style=\"color:#666666\"> =</span><span style=\"color:#4C9A91\"> 50</span><span style=\"color:#666666\"> }</span><span style=\"color:#666666\"> =</span><span style=\"color:#BD976A\"> props</span></span>\n<span class=\"line\"><span style=\"color:#4D9375\">  if</span><span style=\"color:#666666\"> (</span><span style=\"color:#BD976A\">index</span><span style=\"color:#666666\"> ></span><span style=\"color:#BD976A\"> lastMeasuredItemIndex</span><span style=\"color:#666666\">)</span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">    let </span><span style=\"color:#BD976A\">offset</span><span style=\"color:#666666\"> =</span><span style=\"color:#4C9A91\"> 0</span></span>\n<span class=\"line\"><span style=\"color:#4D9375\">    if</span><span style=\"color:#666666\"> (</span><span style=\"color:#BD976A\">lastMeasuredItemIndex</span><span style=\"color:#666666\"> >=</span><span style=\"color:#4C9A91\"> 0</span><span style=\"color:#666666\">)</span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">      const </span><span style=\"color:#BD976A\">lastItem</span><span style=\"color:#666666\"> =</span><span style=\"color:#BD976A\"> measuredDataMap</span><span style=\"color:#666666\">[</span><span style=\"color:#BD976A\">lastMeasuredItemIndex</span><span style=\"color:#666666\">]</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">      offset</span><span style=\"color:#CB7676\"> += </span><span style=\"color:#BD976A\">lastItem</span><span style=\"color:#666666\">.</span><span style=\"color:#BD976A\">offset</span><span style=\"color:#CB7676\"> + </span><span style=\"color:#BD976A\">lastItem</span><span style=\"color:#666666\">.</span><span style=\"color:#BD976A\">size</span></span>\n<span class=\"line\"><span style=\"color:#666666\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#4D9375\">    for</span><span style=\"color:#666666\"> (</span><span style=\"color:#CB7676\">let </span><span style=\"color:#BD976A\">i</span><span style=\"color:#666666\"> =</span><span style=\"color:#BD976A\"> lastMeasuredItemIndex</span><span style=\"color:#CB7676\"> + </span><span style=\"color:#4C9A91\">1</span><span style=\"color:#666666\">;</span><span style=\"color:#BD976A\"> i</span><span style=\"color:#666666\"> &#x3C;=</span><span style=\"color:#BD976A\"> index</span><span style=\"color:#666666\">;</span><span style=\"color:#BD976A\"> i</span><span style=\"color:#CB7676\">++</span><span style=\"color:#666666\">)</span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">      measuredDataMap</span><span style=\"color:#666666\">[</span><span style=\"color:#BD976A\">i</span><span style=\"color:#666666\">]</span><span style=\"color:#666666\"> = { </span><span style=\"color:#B8A965\">size</span><span style=\"color:#666666\">: </span><span style=\"color:#BD976A\">itemEstimatedSize</span><span style=\"color:#666666\">, </span><span style=\"color:#BD976A\">offset</span><span style=\"color:#666666\"> }</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">      offset</span><span style=\"color:#CB7676\"> += </span><span style=\"color:#BD976A\">itemEstimatedSize</span></span>\n<span class=\"line\"><span style=\"color:#666666\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#BD976A\">    lastMeasuredItemIndex</span><span style=\"color:#666666\"> =</span><span style=\"color:#BD976A\"> index</span></span>\n<span class=\"line\"><span style=\"color:#666666\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#4D9375\">  return</span><span style=\"color:#BD976A\"> measuredDataMap</span><span style=\"color:#666666\">[</span><span style=\"color:#BD976A\">index</span><span style=\"color:#666666\">]</span></span>\n<span class=\"line\"><span style=\"color:#666666\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#CB7676\">const </span><span style=\"color:#80A665\">binarySearch</span><span style=\"color:#666666\"> =</span><span style=\"color:#666666\"> (</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  props</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">DynamicSizeListProps</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  low</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">number</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  high</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">number</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  target</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">number</span></span>\n<span class=\"line\"><span style=\"color:#666666\">)</span><span style=\"color:#666666\"> =></span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#4D9375\">  while</span><span style=\"color:#666666\"> (</span><span style=\"color:#BD976A\">low</span><span style=\"color:#666666\"> &#x3C;=</span><span style=\"color:#BD976A\"> high</span><span style=\"color:#666666\">)</span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">    const </span><span style=\"color:#BD976A\">mid</span><span style=\"color:#666666\"> =</span><span style=\"color:#BD976A\"> low</span><span style=\"color:#CB7676\"> + </span><span style=\"color:#BD976A\">Math</span><span style=\"color:#666666\">.</span><span style=\"color:#80A665\">floor</span><span style=\"color:#666666\">((</span><span style=\"color:#BD976A\">high</span><span style=\"color:#CB7676\"> - </span><span style=\"color:#BD976A\">low</span><span style=\"color:#666666\">)</span><span style=\"color:#CB7676\"> / </span><span style=\"color:#4C9A91\">2</span><span style=\"color:#666666\">)</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">    const </span><span style=\"color:#BD976A\">currentOffset</span><span style=\"color:#666666\"> =</span><span style=\"color:#80A665\"> getItemLayoutdata</span><span style=\"color:#666666\">(</span><span style=\"color:#BD976A\">props</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> mid</span><span style=\"color:#666666\">).</span><span style=\"color:#BD976A\">offset</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#4D9375\">    if</span><span style=\"color:#666666\"> (</span><span style=\"color:#BD976A\">currentOffset</span><span style=\"color:#CB7676\"> === </span><span style=\"color:#BD976A\">target</span><span style=\"color:#666666\">)</span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#4D9375\">      return</span><span style=\"color:#BD976A\"> mid</span></span>\n<span class=\"line\"><span style=\"color:#666666\">    }</span><span style=\"color:#4D9375\"> else</span><span style=\"color:#4D9375\"> if</span><span style=\"color:#666666\"> (</span><span style=\"color:#BD976A\">currentOffset</span><span style=\"color:#666666\"> &#x3C;</span><span style=\"color:#BD976A\"> target</span><span style=\"color:#666666\">)</span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">      low</span><span style=\"color:#666666\"> =</span><span style=\"color:#BD976A\"> mid</span><span style=\"color:#CB7676\"> + </span><span style=\"color:#4C9A91\">1</span></span>\n<span class=\"line\"><span style=\"color:#666666\">    }</span><span style=\"color:#4D9375\"> else</span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">      high</span><span style=\"color:#666666\"> =</span><span style=\"color:#BD976A\"> mid</span><span style=\"color:#CB7676\"> - </span><span style=\"color:#4C9A91\">1</span></span>\n<span class=\"line\"><span style=\"color:#666666\">    }</span></span>\n<span class=\"line\"><span style=\"color:#666666\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#4D9375\">  return</span><span style=\"color:#BD976A\"> Math</span><span style=\"color:#666666\">.</span><span style=\"color:#80A665\">max</span><span style=\"color:#666666\">(</span><span style=\"color:#BD976A\">low</span><span style=\"color:#CB7676\"> - </span><span style=\"color:#4C9A91\">1</span><span style=\"color:#666666\">)</span></span>\n<span class=\"line\"><span style=\"color:#666666\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#CB7676\">const </span><span style=\"color:#80A665\">expSearch</span><span style=\"color:#666666\"> =</span><span style=\"color:#666666\"> (</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  props</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">DynamicSizeListProps</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  index</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">number</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  target</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">number</span></span>\n<span class=\"line\"><span style=\"color:#666666\">)</span><span style=\"color:#666666\"> =></span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">  const </span><span style=\"color:#666666\">{</span><span style=\"color:#BD976A\"> itemCount</span><span style=\"color:#666666\"> }</span><span style=\"color:#666666\"> =</span><span style=\"color:#BD976A\"> props</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">  let </span><span style=\"color:#BD976A\">exp</span><span style=\"color:#666666\"> =</span><span style=\"color:#4C9A91\"> 1</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#4D9375\">  while</span><span style=\"color:#666666\"> (</span><span style=\"color:#BD976A\">index</span><span style=\"color:#666666\"> &#x3C;</span><span style=\"color:#BD976A\"> itemCount</span><span style=\"color:#CB7676\"> &#x26;&#x26; </span><span style=\"color:#80A665\">getItemLayoutdata</span><span style=\"color:#666666\">(</span><span style=\"color:#BD976A\">props</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> index</span><span style=\"color:#666666\">).</span><span style=\"color:#BD976A\">offset</span><span style=\"color:#666666\"> &#x3C;</span><span style=\"color:#BD976A\"> target</span><span style=\"color:#666666\">)</span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">    index</span><span style=\"color:#CB7676\"> += </span><span style=\"color:#BD976A\">exp</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">    exp</span><span style=\"color:#CB7676\"> *= </span><span style=\"color:#4C9A91\">2</span></span>\n<span class=\"line\"><span style=\"color:#666666\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#4D9375\">  return</span><span style=\"color:#80A665\"> binarySearch</span><span style=\"color:#666666\">(</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">    props</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">    Math</span><span style=\"color:#666666\">.</span><span style=\"color:#80A665\">floor</span><span style=\"color:#666666\">(</span><span style=\"color:#BD976A\">index</span><span style=\"color:#CB7676\"> / </span><span style=\"color:#4C9A91\">2</span><span style=\"color:#666666\">),</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">    Math</span><span style=\"color:#666666\">.</span><span style=\"color:#80A665\">min</span><span style=\"color:#666666\">(</span><span style=\"color:#BD976A\">index</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> itemCount</span><span style=\"color:#CB7676\"> - </span><span style=\"color:#4C9A91\">1</span><span style=\"color:#666666\">),</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">    target</span></span>\n<span class=\"line\"><span style=\"color:#666666\">  )</span></span>\n<span class=\"line\"><span style=\"color:#666666\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#CB7676\">const </span><span style=\"color:#80A665\">getStartIndex</span><span style=\"color:#666666\"> =</span><span style=\"color:#666666\"> (</span><span style=\"color:#BD976A\">props</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">DynamicSizeListProps</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> scrollOffset</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">number</span><span style=\"color:#666666\">)</span><span style=\"color:#666666\"> =></span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#4D9375\">  if</span><span style=\"color:#666666\"> (</span><span style=\"color:#BD976A\">scrollOffset</span><span style=\"color:#CB7676\"> === </span><span style=\"color:#4C9A91\">0</span><span style=\"color:#666666\">)</span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#4D9375\">    return</span><span style=\"color:#4C9A91\"> 0</span></span>\n<span class=\"line\"><span style=\"color:#666666\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#4D9375\">  if</span><span style=\"color:#666666\"> (</span><span style=\"color:#BD976A\">measuredDataMap</span><span style=\"color:#666666\">[</span><span style=\"color:#BD976A\">lastMeasuredItemIndex</span><span style=\"color:#666666\">].</span><span style=\"color:#BD976A\">offset</span><span style=\"color:#666666\"> >=</span><span style=\"color:#BD976A\"> scrollOffset</span><span style=\"color:#666666\">)</span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#4D9375\">    return</span><span style=\"color:#80A665\"> binarySearch</span><span style=\"color:#666666\">(</span><span style=\"color:#BD976A\">props</span><span style=\"color:#666666\">,</span><span style=\"color:#4C9A91\"> 0</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> lastMeasuredItemIndex</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> scrollOffset</span><span style=\"color:#666666\">)</span></span>\n<span class=\"line\"><span style=\"color:#666666\">  }</span></span>\n<span class=\"line\"><span style=\"color:#4D9375\">  return</span><span style=\"color:#80A665\"> expSearch</span><span style=\"color:#666666\">(</span><span style=\"color:#BD976A\">props</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> Math</span><span style=\"color:#666666\">.</span><span style=\"color:#80A665\">max</span><span style=\"color:#666666\">(</span><span style=\"color:#4C9A91\">0</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> lastMeasuredItemIndex</span><span style=\"color:#666666\">),</span><span style=\"color:#BD976A\"> scrollOffset</span><span style=\"color:#666666\">)</span></span>\n<span class=\"line\"><span style=\"color:#666666\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#CB7676\">const </span><span style=\"color:#80A665\">getEndIndex</span><span style=\"color:#666666\"> =</span><span style=\"color:#666666\"> (</span><span style=\"color:#BD976A\">props</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">DynamicSizeListProps</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> startIndex</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">number</span><span style=\"color:#666666\">):</span><span style=\"color:#5DA994\"> number</span><span style=\"color:#666666\"> =></span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">  const </span><span style=\"color:#666666\">{</span><span style=\"color:#BD976A\"> height</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> itemCount</span><span style=\"color:#666666\"> }</span><span style=\"color:#666666\"> =</span><span style=\"color:#BD976A\"> props</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">  const </span><span style=\"color:#BD976A\">startItem</span><span style=\"color:#666666\"> =</span><span style=\"color:#80A665\"> getItemLayoutdata</span><span style=\"color:#666666\">(</span><span style=\"color:#BD976A\">props</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> startIndex</span><span style=\"color:#666666\">)</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">  const </span><span style=\"color:#BD976A\">maxOffset</span><span style=\"color:#666666\"> =</span><span style=\"color:#BD976A\"> startItem</span><span style=\"color:#666666\">.</span><span style=\"color:#BD976A\">offset</span><span style=\"color:#CB7676\"> + </span><span style=\"color:#BD976A\">height</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">  let </span><span style=\"color:#BD976A\">offset</span><span style=\"color:#666666\"> =</span><span style=\"color:#BD976A\"> startItem</span><span style=\"color:#666666\">.</span><span style=\"color:#BD976A\">offset</span><span style=\"color:#CB7676\"> + </span><span style=\"color:#BD976A\">startItem</span><span style=\"color:#666666\">.</span><span style=\"color:#BD976A\">size</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">  let </span><span style=\"color:#BD976A\">endIndex</span><span style=\"color:#666666\"> =</span><span style=\"color:#BD976A\"> startIndex</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#4D9375\">  while</span><span style=\"color:#666666\"> (</span><span style=\"color:#BD976A\">offset</span><span style=\"color:#666666\"> &#x3C;=</span><span style=\"color:#BD976A\"> maxOffset</span><span style=\"color:#CB7676\"> &#x26;&#x26; </span><span style=\"color:#BD976A\">endIndex</span><span style=\"color:#666666\"> &#x3C;</span><span style=\"color:#BD976A\"> itemCount</span><span style=\"color:#CB7676\"> - </span><span style=\"color:#4C9A91\">1</span><span style=\"color:#666666\">)</span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">    endIndex</span><span style=\"color:#CB7676\">++</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">    const </span><span style=\"color:#BD976A\">currentItemLayout</span><span style=\"color:#666666\"> =</span><span style=\"color:#80A665\"> getItemLayoutdata</span><span style=\"color:#666666\">(</span><span style=\"color:#BD976A\">props</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> endIndex</span><span style=\"color:#666666\">)</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">    offset</span><span style=\"color:#CB7676\"> += </span><span style=\"color:#BD976A\">currentItemLayout</span><span style=\"color:#666666\">.</span><span style=\"color:#BD976A\">size</span></span>\n<span class=\"line\"><span style=\"color:#666666\">  }</span></span>\n<span class=\"line\"><span style=\"color:#4D9375\">  return</span><span style=\"color:#BD976A\"> endIndex</span></span>\n<span class=\"line\"><span style=\"color:#666666\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#CB7676\">const </span><span style=\"color:#80A665\">getRangeToRender</span><span style=\"color:#666666\"> =</span><span style=\"color:#666666\"> (</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  props</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">DynamicSizeListProps</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  scrollOffset</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">number</span></span>\n<span class=\"line\"><span style=\"color:#666666\">):</span><span style=\"color:#666666\"> [</span><span style=\"color:#5DA994\">number</span><span style=\"color:#666666\">,</span><span style=\"color:#5DA994\"> number</span><span style=\"color:#666666\">]</span><span style=\"color:#666666\"> =></span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">  const </span><span style=\"color:#666666\">{</span><span style=\"color:#BD976A\"> itemCount</span><span style=\"color:#666666\"> }</span><span style=\"color:#666666\"> =</span><span style=\"color:#BD976A\"> props</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">  const </span><span style=\"color:#BD976A\">startIndex</span><span style=\"color:#666666\"> =</span><span style=\"color:#80A665\"> getStartIndex</span><span style=\"color:#666666\">(</span><span style=\"color:#BD976A\">props</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> scrollOffset</span><span style=\"color:#666666\">)</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">  const </span><span style=\"color:#BD976A\">endIndex</span><span style=\"color:#666666\"> =</span><span style=\"color:#80A665\"> getEndIndex</span><span style=\"color:#666666\">(</span><span style=\"color:#BD976A\">props</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> startIndex</span><span style=\"color:#666666\">)</span></span>\n<span class=\"line\"><span style=\"color:#4D9375\">  return</span><span style=\"color:#666666\"> [</span><span style=\"color:#BD976A\">Math</span><span style=\"color:#666666\">.</span><span style=\"color:#80A665\">max</span><span style=\"color:#666666\">(</span><span style=\"color:#4C9A91\">0</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> startIndex</span><span style=\"color:#CB7676\"> - </span><span style=\"color:#4C9A91\">2</span><span style=\"color:#666666\">),</span><span style=\"color:#BD976A\"> Math</span><span style=\"color:#666666\">.</span><span style=\"color:#80A665\">min</span><span style=\"color:#666666\">(</span><span style=\"color:#BD976A\">itemCount</span><span style=\"color:#CB7676\"> - </span><span style=\"color:#4C9A91\">1</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> endIndex</span><span style=\"color:#CB7676\"> + </span><span style=\"color:#4C9A91\">2</span><span style=\"color:#666666\">)]</span></span>\n<span class=\"line\"><span style=\"color:#666666\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#CB7676\">const </span><span style=\"color:#BD976A\">scrollOffset</span><span style=\"color:#666666\"> =</span><span style=\"color:#80A665\"> ref</span><span style=\"color:#666666\">&#x3C;</span><span style=\"color:#5DA994\">number</span><span style=\"color:#666666\">>(</span><span style=\"color:#4C9A91\">0</span><span style=\"color:#666666\">)</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">const </span><span style=\"color:#BD976A\">forceUpdate</span><span style=\"color:#666666\"> =</span><span style=\"color:#80A665\"> ref</span><span style=\"color:#666666\">&#x3C;</span><span style=\"color:#5DA994\">boolean</span><span style=\"color:#666666\">>(</span><span style=\"color:#4D9375\">false</span><span style=\"color:#666666\">)</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">const </span><span style=\"color:#BD976A\">containerStyle</span><span style=\"color:#666666\"> =</span><span style=\"color:#80A665\"> computed</span><span style=\"color:#666666\">&#x3C;</span><span style=\"color:#5DA994\">CSSProperties</span><span style=\"color:#666666\">>(()</span><span style=\"color:#666666\"> =></span><span style=\"color:#666666\"> ({</span></span>\n<span class=\"line\"><span style=\"color:#B8A965\">  position</span><span style=\"color:#666666\">: </span><span style=\"color:#C98A7D77\">'</span><span style=\"color:#C98A7D\">relative</span><span style=\"color:#C98A7D77\">'</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#B8A965\">  width</span><span style=\"color:#666666\">: </span><span style=\"color:#C98A7D77\">`</span><span style=\"color:#4D9375\">${</span><span style=\"color:#C98A7D\">props</span><span style=\"color:#666666\">.</span><span style=\"color:#C98A7D\">width</span><span style=\"color:#4D9375\">}</span><span style=\"color:#C98A7D\">px</span><span style=\"color:#C98A7D77\">`</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#B8A965\">  height</span><span style=\"color:#666666\">: </span><span style=\"color:#C98A7D77\">`</span><span style=\"color:#4D9375\">${</span><span style=\"color:#C98A7D\">props</span><span style=\"color:#666666\">.</span><span style=\"color:#C98A7D\">height</span><span style=\"color:#4D9375\">}</span><span style=\"color:#C98A7D\">px</span><span style=\"color:#C98A7D77\">`</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#B8A965\">  overflow</span><span style=\"color:#666666\">: </span><span style=\"color:#C98A7D77\">'</span><span style=\"color:#C98A7D\">auto</span><span style=\"color:#C98A7D77\">'</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#B8A965\">  willChange</span><span style=\"color:#666666\">: </span><span style=\"color:#C98A7D77\">'</span><span style=\"color:#C98A7D\">transform</span><span style=\"color:#C98A7D77\">'</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#666666\">}))</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">const </span><span style=\"color:#BD976A\">contentStyle</span><span style=\"color:#666666\"> =</span><span style=\"color:#80A665\"> ref</span><span style=\"color:#666666\">({</span></span>\n<span class=\"line\"><span style=\"color:#B8A965\">  height</span><span style=\"color:#666666\">: </span><span style=\"color:#C98A7D77\">`</span><span style=\"color:#4D9375\">${</span><span style=\"color:#80A665\">estimateHeight</span><span style=\"color:#666666\">(</span><span style=\"color:#C98A7D\">props</span><span style=\"color:#666666\">.</span><span style=\"color:#C98A7D\">itemEstimatedSize</span><span style=\"color:#666666\">,</span><span style=\"color:#C98A7D\"> props</span><span style=\"color:#666666\">.</span><span style=\"color:#C98A7D\">itemCount</span><span style=\"color:#666666\">)</span><span style=\"color:#4D9375\">}</span><span style=\"color:#C98A7D\">px</span><span style=\"color:#C98A7D77\">`</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#B8A965\">  width</span><span style=\"color:#666666\">: </span><span style=\"color:#C98A7D77\">'</span><span style=\"color:#C98A7D\">100%</span><span style=\"color:#C98A7D77\">'</span></span>\n<span class=\"line\"><span style=\"color:#666666\">})</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#CB7676\">const </span><span style=\"color:#80A665\">sizeChangeHandle</span><span style=\"color:#666666\"> =</span><span style=\"color:#666666\"> (</span><span style=\"color:#BD976A\">index</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">number</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> domNode</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">HTMLElement</span><span style=\"color:#666666\">)</span><span style=\"color:#666666\"> =></span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">  const </span><span style=\"color:#BD976A\">height</span><span style=\"color:#666666\"> =</span><span style=\"color:#BD976A\"> domNode</span><span style=\"color:#666666\">.</span><span style=\"color:#BD976A\">offsetHeight</span></span>\n<span class=\"line\"><span style=\"color:#4D9375\">  if</span><span style=\"color:#666666\"> (</span><span style=\"color:#BD976A\">measuredDataMap</span><span style=\"color:#666666\">[</span><span style=\"color:#BD976A\">index</span><span style=\"color:#666666\">]?.</span><span style=\"color:#BD976A\">size</span><span style=\"color:#CB7676\"> !== </span><span style=\"color:#BD976A\">height</span><span style=\"color:#666666\">)</span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">    measuredDataMap</span><span style=\"color:#666666\">[</span><span style=\"color:#BD976A\">index</span><span style=\"color:#666666\">].</span><span style=\"color:#BD976A\">size</span><span style=\"color:#666666\"> =</span><span style=\"color:#BD976A\"> height</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#CB7676\">    let </span><span style=\"color:#BD976A\">offset</span><span style=\"color:#666666\"> =</span><span style=\"color:#BD976A\"> measuredDataMap</span><span style=\"color:#666666\">[</span><span style=\"color:#BD976A\">index</span><span style=\"color:#666666\">].</span><span style=\"color:#BD976A\">offset</span><span style=\"color:#CB7676\"> + </span><span style=\"color:#BD976A\">height</span></span>\n<span class=\"line\"><span style=\"color:#4D9375\">    for</span><span style=\"color:#666666\"> (</span><span style=\"color:#CB7676\">let </span><span style=\"color:#BD976A\">i</span><span style=\"color:#666666\"> =</span><span style=\"color:#BD976A\"> index</span><span style=\"color:#CB7676\"> + </span><span style=\"color:#4C9A91\">1</span><span style=\"color:#666666\">;</span><span style=\"color:#BD976A\"> i</span><span style=\"color:#666666\"> &#x3C;=</span><span style=\"color:#BD976A\"> lastMeasuredItemIndex</span><span style=\"color:#666666\">;</span><span style=\"color:#BD976A\"> i</span><span style=\"color:#CB7676\">++</span><span style=\"color:#666666\">)</span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">      const </span><span style=\"color:#BD976A\">layoutData</span><span style=\"color:#666666\"> =</span><span style=\"color:#BD976A\"> measuredDataMap</span><span style=\"color:#666666\">[</span><span style=\"color:#BD976A\">i</span><span style=\"color:#666666\">]</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">      layoutData</span><span style=\"color:#666666\">.</span><span style=\"color:#BD976A\">offset</span><span style=\"color:#666666\"> =</span><span style=\"color:#BD976A\"> offset</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">      offset</span><span style=\"color:#CB7676\"> += </span><span style=\"color:#BD976A\">layoutData</span><span style=\"color:#666666\">.</span><span style=\"color:#BD976A\">size</span></span>\n<span class=\"line\"><span style=\"color:#666666\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#758575DD\">    // recaculate content height</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">    contentStyle</span><span style=\"color:#666666\">.</span><span style=\"color:#BD976A\">value</span><span style=\"color:#666666\">.</span><span style=\"color:#BD976A\">height</span><span style=\"color:#666666\"> =</span><span style=\"color:#C98A7D77\"> `</span><span style=\"color:#4D9375\">${</span><span style=\"color:#80A665\">estimateHeight</span><span style=\"color:#666666\">(</span><span style=\"color:#C98A7D\">props</span><span style=\"color:#666666\">.</span><span style=\"color:#C98A7D\">itemEstimatedSize</span><span style=\"color:#666666\">,</span><span style=\"color:#C98A7D\"> props</span><span style=\"color:#666666\">.</span><span style=\"color:#C98A7D\">itemCount</span><span style=\"color:#666666\">)</span><span style=\"color:#4D9375\">}</span><span style=\"color:#C98A7D\">px</span><span style=\"color:#C98A7D77\">`</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">    forceUpdate</span><span style=\"color:#666666\">.</span><span style=\"color:#BD976A\">value</span><span style=\"color:#666666\"> =</span><span style=\"color:#CB7676\"> !</span><span style=\"color:#BD976A\">forceUpdate</span><span style=\"color:#666666\">.</span><span style=\"color:#BD976A\">value</span></span>\n<span class=\"line\"><span style=\"color:#666666\">  }</span></span>\n<span class=\"line\"><span style=\"color:#666666\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#CB7676\">interface</span><span style=\"color:#5DA994\"> Item</span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  key</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">number</span></span>\n<span class=\"line\"><span style=\"color:#80A665\">  component</span><span style=\"color:#666666\">: (</span><span style=\"color:#BD976A\">props</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">DynamicRow</span><span style=\"color:#666666\">) => </span><span style=\"color:#5DA994\">any</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  index</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">number</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  style</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">CSSProperties</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#666666\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#CB7676\">const </span><span style=\"color:#80A665\">getCurrentChildren</span><span style=\"color:#666666\"> =</span><span style=\"color:#666666\"> ()</span><span style=\"color:#666666\"> =></span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">  const </span><span style=\"color:#666666\">[</span><span style=\"color:#BD976A\">startIndex</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> endIndex</span><span style=\"color:#666666\">]</span><span style=\"color:#666666\"> =</span><span style=\"color:#80A665\"> getRangeToRender</span><span style=\"color:#666666\">(</span><span style=\"color:#BD976A\">props</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> scrollOffset</span><span style=\"color:#666666\">.</span><span style=\"color:#BD976A\">value</span><span style=\"color:#666666\">)</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">  const </span><span style=\"color:#BD976A\">items</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">Item</span><span style=\"color:#666666\">[] =</span><span style=\"color:#666666\"> []</span></span>\n<span class=\"line\"><span style=\"color:#4D9375\">  for</span><span style=\"color:#666666\"> (</span><span style=\"color:#CB7676\">let </span><span style=\"color:#BD976A\">i</span><span style=\"color:#666666\"> =</span><span style=\"color:#BD976A\"> startIndex</span><span style=\"color:#666666\">;</span><span style=\"color:#BD976A\"> i</span><span style=\"color:#666666\"> &#x3C;=</span><span style=\"color:#BD976A\"> endIndex</span><span style=\"color:#666666\">;</span><span style=\"color:#BD976A\"> i</span><span style=\"color:#CB7676\">++</span><span style=\"color:#666666\">)</span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">    const </span><span style=\"color:#BD976A\">item</span><span style=\"color:#666666\"> =</span><span style=\"color:#80A665\"> getItemLayoutdata</span><span style=\"color:#666666\">(</span><span style=\"color:#BD976A\">props</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> i</span><span style=\"color:#666666\">)</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">    const </span><span style=\"color:#BD976A\">itemStyle</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">CSSProperties</span><span style=\"color:#666666\"> =</span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#B8A965\">      position</span><span style=\"color:#666666\">: </span><span style=\"color:#C98A7D77\">'</span><span style=\"color:#C98A7D\">absolute</span><span style=\"color:#C98A7D77\">'</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#B8A965\">      height</span><span style=\"color:#666666\">: </span><span style=\"color:#C98A7D77\">`</span><span style=\"color:#4D9375\">${</span><span style=\"color:#C98A7D\">item</span><span style=\"color:#666666\">.</span><span style=\"color:#C98A7D\">size</span><span style=\"color:#4D9375\">}</span><span style=\"color:#C98A7D\">px</span><span style=\"color:#C98A7D77\">`</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#B8A965\">      width</span><span style=\"color:#666666\">: </span><span style=\"color:#C98A7D77\">'</span><span style=\"color:#C98A7D\">100%</span><span style=\"color:#C98A7D77\">'</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#B8A965\">      top</span><span style=\"color:#666666\">: </span><span style=\"color:#C98A7D77\">`</span><span style=\"color:#4D9375\">${</span><span style=\"color:#C98A7D\">item</span><span style=\"color:#666666\">.</span><span style=\"color:#C98A7D\">offset</span><span style=\"color:#4D9375\">}</span><span style=\"color:#C98A7D\">px</span><span style=\"color:#C98A7D77\">`</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#666666\">    }</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">    items</span><span style=\"color:#666666\">.</span><span style=\"color:#80A665\">push</span><span style=\"color:#666666\">({</span></span>\n<span class=\"line\"><span style=\"color:#B8A965\">      key</span><span style=\"color:#666666\">: </span><span style=\"color:#BD976A\">i</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#B8A965\">      component</span><span style=\"color:#666666\">: </span><span style=\"color:#BD976A\">slots</span><span style=\"color:#666666\">.</span><span style=\"color:#BD976A\">default</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#B8A965\">      index</span><span style=\"color:#666666\">: </span><span style=\"color:#BD976A\">i</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#B8A965\">      style</span><span style=\"color:#666666\">: </span><span style=\"color:#BD976A\">itemStyle</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#666666\">    })</span></span>\n<span class=\"line\"><span style=\"color:#666666\">  }</span></span>\n<span class=\"line\"><span style=\"color:#4D9375\">  return</span><span style=\"color:#BD976A\"> items</span></span>\n<span class=\"line\"><span style=\"color:#666666\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#CB7676\">const </span><span style=\"color:#BD976A\">scrollHandle</span><span style=\"color:#666666\"> =</span><span style=\"color:#80A665\"> throttle</span><span style=\"color:#666666\">((</span><span style=\"color:#BD976A\">e</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">Event</span><span style=\"color:#666666\">)</span><span style=\"color:#666666\"> =></span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">  const </span><span style=\"color:#666666\">{</span><span style=\"color:#BD976A\"> scrollTop</span><span style=\"color:#666666\"> }</span><span style=\"color:#666666\"> =</span><span style=\"color:#BD976A\"> e</span><span style=\"color:#666666\">.</span><span style=\"color:#BD976A\">target</span><span style=\"color:#4D9375\"> as</span><span style=\"color:#5DA994\"> HTMLElement</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  scrollOffset</span><span style=\"color:#666666\">.</span><span style=\"color:#BD976A\">value</span><span style=\"color:#666666\"> =</span><span style=\"color:#BD976A\"> scrollTop</span></span>\n<span class=\"line\"><span style=\"color:#666666\">},</span><span style=\"color:#4C9A91\"> 50</span><span style=\"color:#666666\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#666666\">&#x3C;/</span><span style=\"color:#4D9375\">script</span><span style=\"color:#666666\">></span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#666666\">&#x3C;</span><span style=\"color:#4D9375\">template</span><span style=\"color:#666666\">></span></span>\n<span class=\"line\"><span style=\"color:#666666\">  &#x3C;</span><span style=\"color:#4D9375\">div</span><span style=\"color:#BD976A\"> :style</span><span style=\"color:#666666\">=</span><span style=\"color:#C98A7D77\">\"</span><span style=\"color:#C98A7D\">containerStyle</span><span style=\"color:#C98A7D77\">\"</span><span style=\"color:#BD976A\"> @scroll</span><span style=\"color:#666666\">=</span><span style=\"color:#C98A7D77\">\"</span><span style=\"color:#C98A7D\">scrollHandle</span><span style=\"color:#C98A7D77\">\"</span><span style=\"color:#666666\">></span></span>\n<span class=\"line\"><span style=\"color:#666666\">    &#x3C;</span><span style=\"color:#4D9375\">div</span><span style=\"color:#BD976A\"> :style</span><span style=\"color:#666666\">=</span><span style=\"color:#C98A7D77\">\"</span><span style=\"color:#C98A7D\">contentStyle</span><span style=\"color:#C98A7D77\">\"</span><span style=\"color:#666666\">></span></span>\n<span class=\"line\"><span style=\"color:#666666\">      &#x3C;</span><span style=\"color:#4D9375\">ListItem</span><span style=\"color:#BD976A\"> v-for</span><span style=\"color:#666666\">=</span><span style=\"color:#C98A7D77\">\"</span><span style=\"color:#C98A7D\">item in getCurrentChildren()</span><span style=\"color:#C98A7D77\">\"</span><span style=\"color:#BD976A\"> :key</span><span style=\"color:#666666\">=</span><span style=\"color:#C98A7D77\">\"</span><span style=\"color:#C98A7D\">item.key</span><span style=\"color:#C98A7D77\">\"</span><span style=\"color:#BD976A\"> :index</span><span style=\"color:#666666\">=</span><span style=\"color:#C98A7D77\">\"</span><span style=\"color:#C98A7D\">item.index</span><span style=\"color:#C98A7D77\">\"</span><span style=\"color:#BD976A\"> :style</span><span style=\"color:#666666\">=</span><span style=\"color:#C98A7D77\">\"</span><span style=\"color:#C98A7D\">item.style</span><span style=\"color:#C98A7D77\">\"</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">        @size-change</span><span style=\"color:#666666\">=</span><span style=\"color:#C98A7D77\">\"</span><span style=\"color:#C98A7D\">sizeChangeHandle</span><span style=\"color:#C98A7D77\">\"</span><span style=\"color:#666666\">></span></span>\n<span class=\"line\"><span style=\"color:#666666\">        &#x3C;</span><span style=\"color:#4D9375\">template</span><span style=\"color:#666666\"> #</span><span style=\"color:#80A665\">default</span><span style=\"color:#666666\">=</span><span style=\"color:#666666\">\"</span><span style=\"color:#666666\">{ </span><span style=\"color:#BD976A\">index</span><span style=\"color:#666666\"> }</span><span style=\"color:#666666\">\"</span><span style=\"color:#666666\">></span></span>\n<span class=\"line\"><span style=\"color:#666666\">          &#x3C;</span><span style=\"color:#4D9375\">component</span><span style=\"color:#BD976A\"> :is</span><span style=\"color:#666666\">=</span><span style=\"color:#C98A7D77\">\"</span><span style=\"color:#C98A7D\">item.component</span><span style=\"color:#C98A7D77\">\"</span><span style=\"color:#BD976A\"> :index</span><span style=\"color:#666666\">=</span><span style=\"color:#C98A7D77\">\"</span><span style=\"color:#C98A7D\">index</span><span style=\"color:#C98A7D77\">\"</span><span style=\"color:#666666\"> /></span></span>\n<span class=\"line\"><span style=\"color:#666666\">        &#x3C;/</span><span style=\"color:#4D9375\">template</span><span style=\"color:#666666\">></span></span>\n<span class=\"line\"><span style=\"color:#666666\">      &#x3C;/</span><span style=\"color:#4D9375\">ListItem</span><span style=\"color:#666666\">></span></span>\n<span class=\"line\"><span style=\"color:#666666\">    &#x3C;/</span><span style=\"color:#4D9375\">div</span><span style=\"color:#666666\">></span></span>\n<span class=\"line\"><span style=\"color:#666666\">    &#x3C;</span><span style=\"color:#4D9375\">div</span><span style=\"color:#BD976A\"> style</span><span style=\"color:#666666\">=</span><span style=\"color:#C98A7D77\">\"</span><span style=\"color:#C98A7D\">display: none;</span><span style=\"color:#C98A7D77\">\"</span><span style=\"color:#666666\">></span><span style=\"color:#DBD7CAEE\">{{ forceUpdate }}</span><span style=\"color:#666666\">&#x3C;/</span><span style=\"color:#4D9375\">div</span><span style=\"color:#666666\">></span></span>\n<span class=\"line\"><span style=\"color:#666666\">  &#x3C;/</span><span style=\"color:#4D9375\">div</span><span style=\"color:#666666\">></span></span>\n<span class=\"line\"><span style=\"color:#666666\">&#x3C;/</span><span style=\"color:#4D9375\">template</span><span style=\"color:#666666\">></span></span>\n<span class=\"line\"></span></code></pre>" }, { "type": "file", "name": "FixedSizeList.vue", "ext": ".vue", "path": "C:\\Users\\郝洪坤\\Desktop\\FrontEnd\\components-show\\vue-components\\src\\components-show\\VirtualList\\FixedSizeList.vue", "content": "<pre><code><span class=\"line\"><span style=\"color:#666666\">&#x3C;</span><span style=\"color:#4D9375\">script</span><span style=\"color:#BD976A\"> lang</span><span style=\"color:#666666\">=</span><span style=\"color:#C98A7D77\">\"</span><span style=\"color:#C98A7D\">ts</span><span style=\"color:#C98A7D77\">\"</span><span style=\"color:#BD976A\"> setup</span><span style=\"color:#666666\">></span></span>\n<span class=\"line\"><span style=\"color:#4D9375\">import</span><span style=\"color:#666666\"> {</span><span style=\"color:#BD976A\"> computed</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> onUnmounted</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> ref</span><span style=\"color:#666666\">,</span><span style=\"color:#4D9375\"> type</span><span style=\"color:#BD976A\"> CSSProperties</span><span style=\"color:#666666\"> }</span><span style=\"color:#4D9375\"> from</span><span style=\"color:#C98A7D77\"> '</span><span style=\"color:#C98A7D\">vue</span><span style=\"color:#C98A7D77\">'</span></span>\n<span class=\"line\"><span style=\"color:#4D9375\">import</span><span style=\"color:#666666\"> {</span><span style=\"color:#BD976A\"> throttle</span><span style=\"color:#666666\"> }</span><span style=\"color:#4D9375\"> from</span><span style=\"color:#C98A7D77\"> '</span><span style=\"color:#C98A7D\">./utils</span><span style=\"color:#C98A7D77\">'</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#4D9375\">export</span><span style=\"color:#CB7676\"> interface</span><span style=\"color:#5DA994\"> FixedRowProps</span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  index</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">number</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  style</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">Record</span><span style=\"color:#666666\">&#x3C;</span><span style=\"color:#5DA994\">string</span><span style=\"color:#666666\">, </span><span style=\"color:#5DA994\">any</span><span style=\"color:#666666\">></span></span>\n<span class=\"line\"><span style=\"color:#666666\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#4D9375\">export</span><span style=\"color:#CB7676\"> interface</span><span style=\"color:#5DA994\"> FixedSizeListProps</span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  height</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">number</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  width</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">number</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  itemSize</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">number</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  itemCount</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">number</span></span>\n<span class=\"line\"><span style=\"color:#666666\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#CB7676\">const </span><span style=\"color:#BD976A\">props</span><span style=\"color:#666666\"> =</span><span style=\"color:#80A665\"> defineProps</span><span style=\"color:#666666\">&#x3C;</span><span style=\"color:#5DA994\">FixedSizeListProps</span><span style=\"color:#666666\">>()</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">const </span><span style=\"color:#BD976A\">slots</span><span style=\"color:#666666\"> =</span><span style=\"color:#80A665\"> defineSlots</span><span style=\"color:#666666\">&#x3C;{</span></span>\n<span class=\"line\"><span style=\"color:#80A665\">  default</span><span style=\"color:#666666\">: (</span><span style=\"color:#BD976A\">props</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">FixedRowProps</span><span style=\"color:#666666\">) => </span><span style=\"color:#5DA994\">any</span></span>\n<span class=\"line\"><span style=\"color:#666666\">}>()</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#CB7676\">const </span><span style=\"color:#BD976A\">scrollOffset</span><span style=\"color:#666666\"> =</span><span style=\"color:#80A665\"> ref</span><span style=\"color:#666666\">&#x3C;</span><span style=\"color:#5DA994\">number</span><span style=\"color:#666666\">>(</span><span style=\"color:#4C9A91\">0</span><span style=\"color:#666666\">)</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">const </span><span style=\"color:#BD976A\">cacheRef</span><span style=\"color:#666666\"> =</span><span style=\"color:#CB7676\"> new </span><span style=\"color:#80A665\">Map</span><span style=\"color:#666666\">&#x3C;</span><span style=\"color:#5DA994\">number</span><span style=\"color:#666666\">,</span><span style=\"color:#5DA994\"> any</span><span style=\"color:#666666\">>()</span></span>\n<span class=\"line\"><span style=\"color:#80A665\">onUnmounted</span><span style=\"color:#666666\">(()</span><span style=\"color:#666666\"> =></span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  cacheRef</span><span style=\"color:#666666\">.</span><span style=\"color:#80A665\">clear</span><span style=\"color:#666666\">()</span></span>\n<span class=\"line\"><span style=\"color:#666666\">})</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#CB7676\">const </span><span style=\"color:#BD976A\">containerStyle</span><span style=\"color:#666666\"> =</span><span style=\"color:#80A665\"> computed</span><span style=\"color:#666666\">&#x3C;</span><span style=\"color:#5DA994\">CSSProperties</span><span style=\"color:#666666\">>(()</span><span style=\"color:#666666\"> =></span><span style=\"color:#666666\"> ({</span></span>\n<span class=\"line\"><span style=\"color:#B8A965\">  position</span><span style=\"color:#666666\">: </span><span style=\"color:#C98A7D77\">'</span><span style=\"color:#C98A7D\">relative</span><span style=\"color:#C98A7D77\">'</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#B8A965\">  width</span><span style=\"color:#666666\">: </span><span style=\"color:#C98A7D77\">`</span><span style=\"color:#4D9375\">${</span><span style=\"color:#C98A7D\">props</span><span style=\"color:#666666\">.</span><span style=\"color:#C98A7D\">width</span><span style=\"color:#4D9375\">}</span><span style=\"color:#C98A7D\">px</span><span style=\"color:#C98A7D77\">`</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#B8A965\">  height</span><span style=\"color:#666666\">: </span><span style=\"color:#C98A7D77\">`</span><span style=\"color:#4D9375\">${</span><span style=\"color:#C98A7D\">props</span><span style=\"color:#666666\">.</span><span style=\"color:#C98A7D\">height</span><span style=\"color:#4D9375\">}</span><span style=\"color:#C98A7D\">px</span><span style=\"color:#C98A7D77\">`</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#B8A965\">  overflow</span><span style=\"color:#666666\">: </span><span style=\"color:#C98A7D77\">'</span><span style=\"color:#C98A7D\">auto</span><span style=\"color:#C98A7D77\">'</span></span>\n<span class=\"line\"><span style=\"color:#666666\">}))</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#CB7676\">const </span><span style=\"color:#BD976A\">contentStyle</span><span style=\"color:#666666\"> =</span><span style=\"color:#80A665\"> computed</span><span style=\"color:#666666\">&#x3C;</span><span style=\"color:#5DA994\">CSSProperties</span><span style=\"color:#666666\">>(()</span><span style=\"color:#666666\"> =></span><span style=\"color:#666666\"> ({</span></span>\n<span class=\"line\"><span style=\"color:#B8A965\">  height</span><span style=\"color:#666666\">: </span><span style=\"color:#C98A7D77\">`</span><span style=\"color:#4D9375\">${</span><span style=\"color:#C98A7D\">props</span><span style=\"color:#666666\">.</span><span style=\"color:#C98A7D\">itemSize </span><span style=\"color:#CB7676\">*</span><span style=\"color:#C98A7D\"> props</span><span style=\"color:#666666\">.</span><span style=\"color:#C98A7D\">itemCount</span><span style=\"color:#4D9375\">}</span><span style=\"color:#C98A7D\">px</span><span style=\"color:#C98A7D77\">`</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#B8A965\">  width</span><span style=\"color:#666666\">: </span><span style=\"color:#C98A7D77\">'</span><span style=\"color:#C98A7D\">100%</span><span style=\"color:#C98A7D77\">'</span></span>\n<span class=\"line\"><span style=\"color:#666666\">}))</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#CB7676\">interface</span><span style=\"color:#5DA994\"> Item</span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  key</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">number</span></span>\n<span class=\"line\"><span style=\"color:#80A665\">  component</span><span style=\"color:#666666\">: (</span><span style=\"color:#BD976A\">props</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">FixedRowProps</span><span style=\"color:#666666\">) => </span><span style=\"color:#5DA994\">any</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  index</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">number</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  style</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">CSSProperties</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#666666\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#CB7676\">const </span><span style=\"color:#80A665\">getCurrentChildren</span><span style=\"color:#666666\"> =</span><span style=\"color:#666666\"> ()</span><span style=\"color:#666666\"> =></span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">  const </span><span style=\"color:#BD976A\">startIndex</span><span style=\"color:#666666\"> =</span><span style=\"color:#BD976A\"> Math</span><span style=\"color:#666666\">.</span><span style=\"color:#80A665\">floor</span><span style=\"color:#666666\">(</span><span style=\"color:#BD976A\">scrollOffset</span><span style=\"color:#666666\">.</span><span style=\"color:#BD976A\">value</span><span style=\"color:#CB7676\"> / </span><span style=\"color:#BD976A\">props</span><span style=\"color:#666666\">.</span><span style=\"color:#BD976A\">itemSize</span><span style=\"color:#666666\">)</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">  const </span><span style=\"color:#BD976A\">finalStartIndex</span><span style=\"color:#666666\"> =</span><span style=\"color:#BD976A\"> Math</span><span style=\"color:#666666\">.</span><span style=\"color:#80A665\">max</span><span style=\"color:#666666\">(</span><span style=\"color:#4C9A91\">0</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> startIndex</span><span style=\"color:#CB7676\"> - </span><span style=\"color:#4C9A91\">2</span><span style=\"color:#666666\">)</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">  const </span><span style=\"color:#BD976A\">numVisible</span><span style=\"color:#666666\"> =</span><span style=\"color:#BD976A\"> Math</span><span style=\"color:#666666\">.</span><span style=\"color:#80A665\">ceil</span><span style=\"color:#666666\">(</span><span style=\"color:#BD976A\">props</span><span style=\"color:#666666\">.</span><span style=\"color:#BD976A\">height</span><span style=\"color:#CB7676\"> / </span><span style=\"color:#BD976A\">props</span><span style=\"color:#666666\">.</span><span style=\"color:#BD976A\">itemSize</span><span style=\"color:#666666\">)</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">  const </span><span style=\"color:#BD976A\">endIndex</span><span style=\"color:#666666\"> =</span><span style=\"color:#BD976A\"> Math</span><span style=\"color:#666666\">.</span><span style=\"color:#80A665\">min</span><span style=\"color:#666666\">(</span><span style=\"color:#BD976A\">props</span><span style=\"color:#666666\">.</span><span style=\"color:#BD976A\">itemCount</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> startIndex</span><span style=\"color:#CB7676\"> + </span><span style=\"color:#BD976A\">numVisible</span><span style=\"color:#CB7676\"> + </span><span style=\"color:#4C9A91\">2</span><span style=\"color:#666666\">)</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">  const </span><span style=\"color:#BD976A\">items</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">Item</span><span style=\"color:#666666\">[] =</span><span style=\"color:#666666\"> []</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#4D9375\">  for</span><span style=\"color:#666666\"> (</span><span style=\"color:#CB7676\">let </span><span style=\"color:#BD976A\">i</span><span style=\"color:#666666\"> =</span><span style=\"color:#BD976A\"> finalStartIndex</span><span style=\"color:#666666\">;</span><span style=\"color:#BD976A\"> i</span><span style=\"color:#666666\"> &#x3C;</span><span style=\"color:#BD976A\"> endIndex</span><span style=\"color:#666666\">;</span><span style=\"color:#BD976A\"> i</span><span style=\"color:#CB7676\">++</span><span style=\"color:#666666\">)</span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#4D9375\">    if</span><span style=\"color:#666666\"> (</span><span style=\"color:#BD976A\">cacheRef</span><span style=\"color:#666666\">.</span><span style=\"color:#80A665\">has</span><span style=\"color:#666666\">(</span><span style=\"color:#BD976A\">i</span><span style=\"color:#666666\">))</span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">      items</span><span style=\"color:#666666\">.</span><span style=\"color:#80A665\">push</span><span style=\"color:#666666\">(</span><span style=\"color:#BD976A\">cacheRef</span><span style=\"color:#666666\">.</span><span style=\"color:#80A665\">get</span><span style=\"color:#666666\">(</span><span style=\"color:#BD976A\">i</span><span style=\"color:#666666\">))</span></span>\n<span class=\"line\"><span style=\"color:#666666\">    }</span><span style=\"color:#4D9375\"> else</span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">      const </span><span style=\"color:#BD976A\">itemStyle</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">CSSProperties</span><span style=\"color:#666666\"> =</span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#B8A965\">        position</span><span style=\"color:#666666\">: </span><span style=\"color:#C98A7D77\">'</span><span style=\"color:#C98A7D\">absolute</span><span style=\"color:#C98A7D77\">'</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#B8A965\">        height</span><span style=\"color:#666666\">: </span><span style=\"color:#C98A7D77\">`</span><span style=\"color:#4D9375\">${</span><span style=\"color:#C98A7D\">props</span><span style=\"color:#666666\">.</span><span style=\"color:#C98A7D\">itemSize</span><span style=\"color:#4D9375\">}</span><span style=\"color:#C98A7D\">px</span><span style=\"color:#C98A7D77\">`</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#B8A965\">        width</span><span style=\"color:#666666\">: </span><span style=\"color:#C98A7D77\">'</span><span style=\"color:#C98A7D\">100%</span><span style=\"color:#C98A7D77\">'</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#B8A965\">        top</span><span style=\"color:#666666\">: </span><span style=\"color:#C98A7D77\">`</span><span style=\"color:#4D9375\">${</span><span style=\"color:#C98A7D\">props</span><span style=\"color:#666666\">.</span><span style=\"color:#C98A7D\">itemSize </span><span style=\"color:#CB7676\">*</span><span style=\"color:#C98A7D\"> i</span><span style=\"color:#4D9375\">}</span><span style=\"color:#C98A7D\">px</span><span style=\"color:#C98A7D77\">`</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#666666\">      }</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">      const </span><span style=\"color:#BD976A\">item</span><span style=\"color:#666666\"> =</span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#B8A965\">        key</span><span style=\"color:#666666\">: </span><span style=\"color:#BD976A\">i</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#B8A965\">        component</span><span style=\"color:#666666\">: </span><span style=\"color:#BD976A\">slots</span><span style=\"color:#666666\">.</span><span style=\"color:#BD976A\">default</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#B8A965\">        index</span><span style=\"color:#666666\">: </span><span style=\"color:#BD976A\">i</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#B8A965\">        style</span><span style=\"color:#666666\">: </span><span style=\"color:#BD976A\">itemStyle</span><span style=\"color:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#666666\">      }</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">      cacheRef</span><span style=\"color:#666666\">.</span><span style=\"color:#80A665\">set</span><span style=\"color:#666666\">(</span><span style=\"color:#BD976A\">i</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> item</span><span style=\"color:#666666\">)</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">      items</span><span style=\"color:#666666\">.</span><span style=\"color:#80A665\">push</span><span style=\"color:#666666\">(</span><span style=\"color:#BD976A\">item</span><span style=\"color:#666666\">)</span></span>\n<span class=\"line\"><span style=\"color:#666666\">    }</span></span>\n<span class=\"line\"><span style=\"color:#666666\">  }</span></span>\n<span class=\"line\"><span style=\"color:#4D9375\">  return</span><span style=\"color:#BD976A\"> items</span></span>\n<span class=\"line\"><span style=\"color:#666666\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#CB7676\">const </span><span style=\"color:#BD976A\">handleScroll</span><span style=\"color:#666666\"> =</span><span style=\"color:#80A665\"> throttle</span><span style=\"color:#666666\">((</span><span style=\"color:#BD976A\">event</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">UIEvent</span><span style=\"color:#666666\">)</span><span style=\"color:#666666\"> =></span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">  const </span><span style=\"color:#666666\">{</span><span style=\"color:#BD976A\"> scrollTop</span><span style=\"color:#666666\"> }</span><span style=\"color:#666666\"> =</span><span style=\"color:#BD976A\"> event</span><span style=\"color:#666666\">.</span><span style=\"color:#BD976A\">target</span><span style=\"color:#4D9375\"> as</span><span style=\"color:#5DA994\"> HTMLDivElement</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  scrollOffset</span><span style=\"color:#666666\">.</span><span style=\"color:#BD976A\">value</span><span style=\"color:#666666\"> =</span><span style=\"color:#BD976A\"> scrollTop</span></span>\n<span class=\"line\"><span style=\"color:#666666\">},</span><span style=\"color:#4C9A91\"> 50</span><span style=\"color:#666666\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#666666\">&#x3C;/</span><span style=\"color:#4D9375\">script</span><span style=\"color:#666666\">></span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#666666\">&#x3C;</span><span style=\"color:#4D9375\">template</span><span style=\"color:#666666\">></span></span>\n<span class=\"line\"><span style=\"color:#666666\">  &#x3C;</span><span style=\"color:#4D9375\">div</span><span style=\"color:#BD976A\"> :style</span><span style=\"color:#666666\">=</span><span style=\"color:#C98A7D77\">\"</span><span style=\"color:#C98A7D\">containerStyle</span><span style=\"color:#C98A7D77\">\"</span><span style=\"color:#BD976A\"> @scroll</span><span style=\"color:#666666\">=</span><span style=\"color:#C98A7D77\">\"</span><span style=\"color:#C98A7D\">handleScroll</span><span style=\"color:#C98A7D77\">\"</span><span style=\"color:#666666\">></span></span>\n<span class=\"line\"><span style=\"color:#666666\">    &#x3C;</span><span style=\"color:#4D9375\">div</span><span style=\"color:#BD976A\"> :style</span><span style=\"color:#666666\">=</span><span style=\"color:#C98A7D77\">\"</span><span style=\"color:#C98A7D\">contentStyle</span><span style=\"color:#C98A7D77\">\"</span><span style=\"color:#666666\">></span></span>\n<span class=\"line\"><span style=\"color:#666666\">      &#x3C;</span><span style=\"color:#4D9375\">keep-alive</span><span style=\"color:#666666\">></span></span>\n<span class=\"line\"><span style=\"color:#666666\">        &#x3C;</span><span style=\"color:#4D9375\">component</span><span style=\"color:#BD976A\"> v-for</span><span style=\"color:#666666\">=</span><span style=\"color:#C98A7D77\">\"</span><span style=\"color:#C98A7D\">item in getCurrentChildren()</span><span style=\"color:#C98A7D77\">\"</span><span style=\"color:#BD976A\"> :key</span><span style=\"color:#666666\">=</span><span style=\"color:#C98A7D\">item.key</span><span style=\"color:#BD976A\"> :is</span><span style=\"color:#666666\">=</span><span style=\"color:#C98A7D77\">\"</span><span style=\"color:#C98A7D\">item.component</span><span style=\"color:#C98A7D77\">\"</span><span style=\"color:#BD976A\"> :index</span><span style=\"color:#666666\">=</span><span style=\"color:#C98A7D77\">\"</span><span style=\"color:#C98A7D\">item.index</span><span style=\"color:#C98A7D77\">\"</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">          :style</span><span style=\"color:#666666\">=</span><span style=\"color:#C98A7D77\">\"</span><span style=\"color:#C98A7D\">item.style</span><span style=\"color:#C98A7D77\">\"</span><span style=\"color:#666666\"> /></span></span>\n<span class=\"line\"><span style=\"color:#666666\">      &#x3C;/</span><span style=\"color:#4D9375\">keep-alive</span><span style=\"color:#666666\">></span></span>\n<span class=\"line\"><span style=\"color:#666666\">    &#x3C;/</span><span style=\"color:#4D9375\">div</span><span style=\"color:#666666\">></span></span>\n<span class=\"line\"><span style=\"color:#666666\">  &#x3C;/</span><span style=\"color:#4D9375\">div</span><span style=\"color:#666666\">></span></span>\n<span class=\"line\"><span style=\"color:#666666\">&#x3C;/</span><span style=\"color:#4D9375\">template</span><span style=\"color:#666666\">></span></span>\n<span class=\"line\"></span></code></pre>" }, { "type": "file", "name": "index.ts", "ext": ".ts", "path": "C:\\Users\\郝洪坤\\Desktop\\FrontEnd\\components-show\\vue-components\\src\\components-show\\VirtualList\\index.ts", "content": "<pre><code><span class=\"line\"><span style=\"color:#4D9375\">import</span><span style=\"color:#BD976A\"> VirtualList</span><span style=\"color:#4D9375\"> from</span><span style=\"color:#C98A7D77\"> \"</span><span style=\"color:#C98A7D\">./VirtualList.vue</span><span style=\"color:#C98A7D77\">\"</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#4D9375\">export</span><span style=\"color:#4D9375\"> default</span><span style=\"color:#BD976A\"> VirtualList</span></span>\n<span class=\"line\"></span></code></pre>" }, { "type": "file", "name": "ListItem.vue", "ext": ".vue", "path": "C:\\Users\\郝洪坤\\Desktop\\FrontEnd\\components-show\\vue-components\\src\\components-show\\VirtualList\\ListItem.vue", "content": "<pre><code><span class=\"line\"><span style=\"color:#666666\">&#x3C;</span><span style=\"color:#4D9375\">script</span><span style=\"color:#BD976A\"> lang</span><span style=\"color:#666666\">=</span><span style=\"color:#C98A7D77\">\"</span><span style=\"color:#C98A7D\">ts</span><span style=\"color:#C98A7D77\">\"</span><span style=\"color:#BD976A\"> setup</span><span style=\"color:#666666\">></span></span>\n<span class=\"line\"><span style=\"color:#4D9375\">import</span><span style=\"color:#666666\"> {</span><span style=\"color:#BD976A\"> onMounted</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> onUnmounted</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> useTemplateRef</span><span style=\"color:#666666\">,</span><span style=\"color:#4D9375\"> type</span><span style=\"color:#BD976A\"> CSSProperties</span><span style=\"color:#666666\"> }</span><span style=\"color:#4D9375\"> from</span><span style=\"color:#C98A7D77\"> '</span><span style=\"color:#C98A7D\">vue</span><span style=\"color:#C98A7D77\">'</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#80A665\">defineOptions</span><span style=\"color:#666666\">({</span></span>\n<span class=\"line\"><span style=\"color:#B8A965\">  name</span><span style=\"color:#666666\">: </span><span style=\"color:#C98A7D77\">'</span><span style=\"color:#C98A7D\">DynamicSizeListItem</span><span style=\"color:#C98A7D77\">'</span></span>\n<span class=\"line\"><span style=\"color:#666666\">})</span></span>\n<span class=\"line\"><span style=\"color:#80A665\">defineSlots</span><span style=\"color:#666666\">&#x3C;{</span></span>\n<span class=\"line\"><span style=\"color:#80A665\">  default</span><span style=\"color:#666666\">: (</span><span style=\"color:#BD976A\">props</span><span style=\"color:#666666\">: { </span><span style=\"color:#BD976A\">index</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">number</span><span style=\"color:#666666\"> }) => </span><span style=\"color:#5DA994\">any</span></span>\n<span class=\"line\"><span style=\"color:#666666\">}>()</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">const </span><span style=\"color:#BD976A\">props</span><span style=\"color:#666666\"> =</span><span style=\"color:#80A665\"> defineProps</span><span style=\"color:#666666\">&#x3C;{</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  index</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">number</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  style</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">CSSProperties</span></span>\n<span class=\"line\"><span style=\"color:#666666\">}>()</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">const </span><span style=\"color:#BD976A\">emits</span><span style=\"color:#666666\"> =</span><span style=\"color:#80A665\"> defineEmits</span><span style=\"color:#666666\">&#x3C;{</span></span>\n<span class=\"line\"><span style=\"color:#666666\">  (</span><span style=\"color:#BD976A\">e</span><span style=\"color:#666666\">: </span><span style=\"color:#C98A7D77\">'</span><span style=\"color:#C98A7D\">size-change</span><span style=\"color:#C98A7D77\">'</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> index</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">number</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> domNode</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">HTMLElement</span><span style=\"color:#666666\">):</span><span style=\"color:#5DA994\"> void</span></span>\n<span class=\"line\"><span style=\"color:#666666\">}>()</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#CB7676\">const </span><span style=\"color:#BD976A\">container</span><span style=\"color:#666666\"> =</span><span style=\"color:#80A665\"> useTemplateRef</span><span style=\"color:#666666\">&#x3C;</span><span style=\"color:#5DA994\">HTMLElement</span><span style=\"color:#666666\">>(</span><span style=\"color:#C98A7D77\">'</span><span style=\"color:#C98A7D\">containerRef</span><span style=\"color:#C98A7D77\">'</span><span style=\"color:#666666\">)</span></span>\n<span class=\"line\"><span style=\"color:#80A665\">onMounted</span><span style=\"color:#666666\">(()</span><span style=\"color:#666666\"> =></span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#4D9375\">  if</span><span style=\"color:#666666\"> (</span><span style=\"color:#CB7676\">!</span><span style=\"color:#BD976A\">container</span><span style=\"color:#666666\">.</span><span style=\"color:#BD976A\">value</span><span style=\"color:#666666\">)</span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#4D9375\">    return</span></span>\n<span class=\"line\"><span style=\"color:#666666\">  }</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">  const </span><span style=\"color:#BD976A\">domNode</span><span style=\"color:#666666\"> =</span><span style=\"color:#BD976A\"> container</span><span style=\"color:#666666\">.</span><span style=\"color:#BD976A\">value</span><span style=\"color:#666666\">.</span><span style=\"color:#BD976A\">firstElementChild</span><span style=\"color:#4D9375\">  as</span><span style=\"color:#5DA994\"> HTMLElement</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">  const </span><span style=\"color:#BD976A\">resizeObserver</span><span style=\"color:#666666\"> =</span><span style=\"color:#CB7676\"> new </span><span style=\"color:#80A665\">ResizeObserver</span><span style=\"color:#666666\">(()</span><span style=\"color:#666666\"> =></span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#80A665\">    emits</span><span style=\"color:#666666\">(</span><span style=\"color:#C98A7D77\">'</span><span style=\"color:#C98A7D\">size-change</span><span style=\"color:#C98A7D77\">'</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> props</span><span style=\"color:#666666\">.</span><span style=\"color:#BD976A\">index</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> domNode</span><span style=\"color:#666666\">)</span></span>\n<span class=\"line\"><span style=\"color:#666666\">  })</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">  resizeObserver</span><span style=\"color:#666666\">.</span><span style=\"color:#80A665\">observe</span><span style=\"color:#666666\">(</span><span style=\"color:#BD976A\">domNode</span><span style=\"color:#666666\">)</span></span>\n<span class=\"line\"><span style=\"color:#80A665\">  onUnmounted</span><span style=\"color:#666666\">(()</span><span style=\"color:#666666\"> =></span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">    resizeObserver</span><span style=\"color:#666666\">.</span><span style=\"color:#80A665\">unobserve</span><span style=\"color:#666666\">(</span><span style=\"color:#BD976A\">domNode</span><span style=\"color:#666666\">)</span></span>\n<span class=\"line\"><span style=\"color:#666666\">  })</span></span>\n<span class=\"line\"><span style=\"color:#666666\">})</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#666666\">&#x3C;/</span><span style=\"color:#4D9375\">script</span><span style=\"color:#666666\">></span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#666666\">&#x3C;</span><span style=\"color:#4D9375\">template</span><span style=\"color:#666666\">></span></span>\n<span class=\"line\"><span style=\"color:#666666\">  &#x3C;</span><span style=\"color:#4D9375\">div</span><span style=\"color:#BD976A\"> :style</span><span style=\"color:#666666\">=</span><span style=\"color:#C98A7D77\">\"</span><span style=\"color:#C98A7D\">style</span><span style=\"color:#C98A7D77\">\"</span><span style=\"color:#BD976A\"> ref</span><span style=\"color:#666666\">=</span><span style=\"color:#C98A7D77\">\"</span><span style=\"color:#C98A7D\">containerRef</span><span style=\"color:#C98A7D77\">\"</span><span style=\"color:#666666\">></span></span>\n<span class=\"line\"><span style=\"color:#666666\">    &#x3C;</span><span style=\"color:#4D9375\">slot</span><span style=\"color:#BD976A\"> :index</span><span style=\"color:#666666\">=</span><span style=\"color:#C98A7D77\">\"</span><span style=\"color:#C98A7D\">index</span><span style=\"color:#C98A7D77\">\"</span><span style=\"color:#666666\">>&#x3C;/</span><span style=\"color:#4D9375\">slot</span><span style=\"color:#666666\">></span></span>\n<span class=\"line\"><span style=\"color:#666666\">  &#x3C;/</span><span style=\"color:#4D9375\">div</span><span style=\"color:#666666\">></span></span>\n<span class=\"line\"><span style=\"color:#666666\">&#x3C;/</span><span style=\"color:#4D9375\">template</span><span style=\"color:#666666\">></span></span></code></pre>" }, { "type": "file", "name": "utils.ts", "ext": ".ts", "path": "C:\\Users\\郝洪坤\\Desktop\\FrontEnd\\components-show\\vue-components\\src\\components-show\\VirtualList\\utils.ts", "content": "<pre><code><span class=\"line\"><span style=\"color:#4D9375\">export</span><span style=\"color:#CB7676\"> const </span><span style=\"color:#80A665\">throttle</span><span style=\"color:#666666\"> =</span><span style=\"color:#666666\"> (</span><span style=\"color:#80A665\">fn</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">Function</span><span style=\"color:#666666\">,</span><span style=\"color:#BD976A\"> delay</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">number</span><span style=\"color:#666666\">)</span><span style=\"color:#666666\"> =></span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#CB7676\">  let </span><span style=\"color:#BD976A\">timer</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">number</span><span style=\"color:#666666\"> | </span><span style=\"color:#CB7676\">null</span></span>\n<span class=\"line\"><span style=\"color:#4D9375\">  return</span><span style=\"color:#666666\"> (...</span><span style=\"color:#BD976A\">args</span><span style=\"color:#666666\">: </span><span style=\"color:#5DA994\">any</span><span style=\"color:#666666\">[])</span><span style=\"color:#666666\"> =></span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#4D9375\">    if</span><span style=\"color:#666666\"> (</span><span style=\"color:#CB7676\">!</span><span style=\"color:#BD976A\">timer</span><span style=\"color:#666666\">)</span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">      timer</span><span style=\"color:#666666\"> =</span><span style=\"color:#80A665\"> setTimeout</span><span style=\"color:#666666\">(()</span><span style=\"color:#666666\"> =></span><span style=\"color:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"color:#80A665\">        fn</span><span style=\"color:#666666\">(...</span><span style=\"color:#BD976A\">args</span><span style=\"color:#666666\">)</span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">        timer</span><span style=\"color:#666666\"> =</span><span style=\"color:#CB7676\"> null</span></span>\n<span class=\"line\"><span style=\"color:#666666\">      },</span><span style=\"color:#BD976A\"> delay</span><span style=\"color:#666666\">)</span></span>\n<span class=\"line\"><span style=\"color:#666666\">    }</span></span>\n<span class=\"line\"><span style=\"color:#666666\">  }</span></span>\n<span class=\"line\"><span style=\"color:#666666\">}</span></span>\n<span class=\"line\"></span></code></pre>" }, { "type": "file", "name": "VirtualList.vue", "ext": ".vue", "path": "C:\\Users\\郝洪坤\\Desktop\\FrontEnd\\components-show\\vue-components\\src\\components-show\\VirtualList\\VirtualList.vue", "content": "<pre><code><span class=\"line\"><span style=\"color:#666666\">&#x3C;</span><span style=\"color:#4D9375\">script</span><span style=\"color:#BD976A\"> setup</span><span style=\"color:#BD976A\"> lang</span><span style=\"color:#666666\">=</span><span style=\"color:#C98A7D77\">\"</span><span style=\"color:#C98A7D\">ts</span><span style=\"color:#C98A7D77\">\"</span><span style=\"color:#666666\">></span></span>\n<span class=\"line\"><span style=\"color:#4D9375\">import</span><span style=\"color:#BD976A\"> FixedSizeList</span><span style=\"color:#4D9375\"> from</span><span style=\"color:#C98A7D77\"> '</span><span style=\"color:#C98A7D\">./FixedSizeList.vue</span><span style=\"color:#C98A7D77\">'</span></span>\n<span class=\"line\"><span style=\"color:#4D9375\">import</span><span style=\"color:#BD976A\"> DynamicSizeList</span><span style=\"color:#4D9375\"> from</span><span style=\"color:#C98A7D77\"> '</span><span style=\"color:#C98A7D\">./DynamicSizeList.vue</span><span style=\"color:#C98A7D77\">'</span></span>\n<span class=\"line\"><span style=\"color:#666666\">&#x3C;/</span><span style=\"color:#4D9375\">script</span><span style=\"color:#666666\">></span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#666666\">&#x3C;</span><span style=\"color:#4D9375\">template</span><span style=\"color:#666666\">></span></span>\n<span class=\"line\"><span style=\"color:#666666\">  &#x3C;</span><span style=\"color:#4D9375\">div</span><span style=\"color:#BD976A\"> class</span><span style=\"color:#666666\">=</span><span style=\"color:#C98A7D77\">\"</span><span style=\"color:#C98A7D\">flex w-full justify-around items-center</span><span style=\"color:#C98A7D77\">\"</span><span style=\"color:#666666\">></span></span>\n<span class=\"line\"><span style=\"color:#666666\">    &#x3C;</span><span style=\"color:#4D9375\">DynamicSizeList</span><span style=\"color:#BD976A\"> :height</span><span style=\"color:#666666\">=</span><span style=\"color:#C98A7D77\">\"</span><span style=\"color:#C98A7D\">300</span><span style=\"color:#C98A7D77\">\"</span><span style=\"color:#BD976A\"> :width</span><span style=\"color:#666666\">=</span><span style=\"color:#C98A7D77\">\"</span><span style=\"color:#C98A7D\">300</span><span style=\"color:#C98A7D77\">\"</span><span style=\"color:#BD976A\"> :itemCount</span><span style=\"color:#666666\">=</span><span style=\"color:#C98A7D77\">\"</span><span style=\"color:#C98A7D\">1000000</span><span style=\"color:#C98A7D77\">\"</span><span style=\"color:#BD976A\"> :item-estimated-size</span><span style=\"color:#666666\">=</span><span style=\"color:#C98A7D77\">\"</span><span style=\"color:#C98A7D\">50</span><span style=\"color:#C98A7D77\">\"</span><span style=\"color:#666666\">></span></span>\n<span class=\"line\"><span style=\"color:#666666\">      &#x3C;</span><span style=\"color:#4D9375\">template</span><span style=\"color:#666666\"> #</span><span style=\"color:#80A665\">default</span><span style=\"color:#666666\">=</span><span style=\"color:#666666\">\"</span><span style=\"color:#666666\">{ </span><span style=\"color:#BD976A\">index</span><span style=\"color:#666666\"> }</span><span style=\"color:#666666\">\"</span><span style=\"color:#666666\">></span></span>\n<span class=\"line\"><span style=\"color:#666666\">        &#x3C;</span><span style=\"color:#4D9375\">div</span><span style=\"color:#DBD7CAEE\"> </span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">        :style</span><span style=\"color:#666666\">=</span><span style=\"color:#C98A7D77\">\"</span><span style=\"color:#C98A7D\">{height: 20 + Math.floor(Math.random() * 50) + 'px'}</span><span style=\"color:#C98A7D77\">\"</span><span style=\"color:#DBD7CAEE\"> </span></span>\n<span class=\"line\"><span style=\"color:#BD976A\">        :class</span><span style=\"color:#666666\">=</span><span style=\"color:#C98A7D77\">\"</span><span style=\"color:#C98A7D\">[index &#x26; 1 ? 'bg-blue-100' : '', 'flex', 'items-center', 'justify-center']</span><span style=\"color:#C98A7D77\">\"</span></span>\n<span class=\"line\"><span style=\"color:#666666\">        ></span><span style=\"color:#DBD7CAEE\">Row {{ index }}</span><span style=\"color:#666666\">&#x3C;/</span><span style=\"color:#4D9375\">div</span><span style=\"color:#666666\">></span></span>\n<span class=\"line\"><span style=\"color:#666666\">      &#x3C;/</span><span style=\"color:#4D9375\">template</span><span style=\"color:#666666\">></span></span>\n<span class=\"line\"><span style=\"color:#666666\">    &#x3C;/</span><span style=\"color:#4D9375\">DynamicSizeList</span><span style=\"color:#666666\">></span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#666666\">    &#x3C;</span><span style=\"color:#4D9375\">FixedSizeList</span><span style=\"color:#BD976A\"> :height</span><span style=\"color:#666666\">=</span><span style=\"color:#C98A7D77\">\"</span><span style=\"color:#C98A7D\">300</span><span style=\"color:#C98A7D77\">\"</span><span style=\"color:#BD976A\"> :width</span><span style=\"color:#666666\">=</span><span style=\"color:#C98A7D77\">\"</span><span style=\"color:#C98A7D\">300</span><span style=\"color:#C98A7D77\">\"</span><span style=\"color:#BD976A\"> :item-size</span><span style=\"color:#666666\">=</span><span style=\"color:#C98A7D77\">\"</span><span style=\"color:#C98A7D\">50</span><span style=\"color:#C98A7D77\">\"</span><span style=\"color:#BD976A\"> :item-count</span><span style=\"color:#666666\">=</span><span style=\"color:#C98A7D77\">\"</span><span style=\"color:#C98A7D\">1000</span><span style=\"color:#C98A7D77\">\"</span><span style=\"color:#666666\">></span></span>\n<span class=\"line\"><span style=\"color:#666666\">      &#x3C;</span><span style=\"color:#4D9375\">template</span><span style=\"color:#666666\"> #</span><span style=\"color:#80A665\">default</span><span style=\"color:#666666\">=</span><span style=\"color:#666666\">\"</span><span style=\"color:#666666\">{ </span><span style=\"color:#BD976A\">index</span><span style=\"color:#666666\">, </span><span style=\"color:#BD976A\">style</span><span style=\"color:#666666\"> }</span><span style=\"color:#666666\">\"</span><span style=\"color:#666666\">></span></span>\n<span class=\"line\"><span style=\"color:#666666\">        &#x3C;</span><span style=\"color:#4D9375\">div</span><span style=\"color:#BD976A\"> :style</span><span style=\"color:#666666\">=</span><span style=\"color:#C98A7D77\">\"</span><span style=\"color:#C98A7D\">style</span><span style=\"color:#C98A7D77\">\"</span><span style=\"color:#BD976A\"> :class</span><span style=\"color:#666666\">=</span><span style=\"color:#C98A7D77\">\"</span><span style=\"color:#C98A7D\">index &#x26; 1 ? 'bg-blue-100' : ''</span><span style=\"color:#C98A7D77\">\"</span><span style=\"color:#666666\">></span><span style=\"color:#DBD7CAEE\">Row {{ index }}</span><span style=\"color:#666666\">&#x3C;/</span><span style=\"color:#4D9375\">div</span><span style=\"color:#666666\">></span></span>\n<span class=\"line\"><span style=\"color:#666666\">      &#x3C;/</span><span style=\"color:#4D9375\">template</span><span style=\"color:#666666\">></span></span>\n<span class=\"line\"><span style=\"color:#666666\">    &#x3C;/</span><span style=\"color:#4D9375\">FixedSizeList</span><span style=\"color:#666666\">></span></span>\n<span class=\"line\"><span style=\"color:#666666\">  &#x3C;/</span><span style=\"color:#4D9375\">div</span><span style=\"color:#666666\">></span></span>\n<span class=\"line\"><span style=\"color:#666666\">&#x3C;/</span><span style=\"color:#4D9375\">template</span><span style=\"color:#666666\">></span></span>\n<span class=\"line\"></span></code></pre>" }]
